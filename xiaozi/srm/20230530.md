# 附件说明

## 合同成本归集

### 列表界面

- 列表数据为现有履约中心下的**确认出库明细**；
- 仅取业务类型为**资管**，需求类型为**采购**、**市场采购**、**库存件出库**范围内的记录；
- 以下字段除新增字段外，其他均为**履约中心-确认出库明细**中的报表字段；

| 显示顺序 | 字段名称         |   属性   | 描述                                                         | 查询条件（按列表顺序展示） | 查询规则                                                     |
| :------: | ---------------- | :------: | :----------------------------------------------------------- | :------------------------- | :----------------------------------------------------------- |
|    1     | 需求单号         |  左固定  | 点击进入需求单详情页面                                       | 是                         | 文本，模糊查询                                               |
|    2     | 工单编号         |          |                                                              | 是                         | 文本，模糊查询                                               |
|    3     | 业务类型         |          |                                                              |                            |                                                              |
|    4     | 采购分类         |          |                                                              | 是                         | 下拉列表<br/>现有采购分类枚举值                              |
|    5     | 需求类型         |          |                                                              | 是                         | 下拉列表<br/>==本期枚举值：==<br/>购买、市场采购、库存件出库 |
|    6     | 申请人           |          |                                                              | 是                         | 文本，模糊查询                                               |
|    7     | 采购跟单人       |          |                                                              | 是                         | 文本，模糊查询                                               |
|    8     | 医院             |          |                                                              | 是                         | 文本，模糊查询                                               |
|          | 客户名称         |          | **20230627新增**<br />取需求申请中的客户名称字段             | 是                         | 文本，模糊查询                                               |
|    9     | 核算单位         |          |                                                              | 是                         | 下拉列表<br/>通用核算单位查询条件组件                        |
|    10    | 对应销售合同     | 新增字段 | 取申请单对应销售合同号<br/>点击进入销售合同详情页面          | 是                         | 文本，模糊查询                                               |
|    11    | 关联采购合同     |          |                                                              | 是                         | 文本，模糊查询                                               |
|    12    | 商品编码         |          |                                                              |                            |                                                              |
|    13    | 实采产品名称     |          |                                                              | 是                         | 文本，模糊查询                                               |
|    14    | 实采产品型号     |          |                                                              |                            |                                                              |
|    15    | 实采产品品牌     |          |                                                              |                            |                                                              |
|    16    | 实采商品分类     |          |                                                              |                            |                                                              |
|    17    | 批次号           |          |                                                              |                            |                                                              |
|    18    | 设备名称         |          |                                                              |                            |                                                              |
|    19    | 设备型号         |          |                                                              |                            |                                                              |
|    20    | 设备厂家         |          |                                                              |                            |                                                              |
|    21    | 是否柯渡保修     |          |                                                              |                            |                                                              |
|    22    | 需求产品名称     |          |                                                              |                            |                                                              |
|    23    | 需求产品型号     |          |                                                              |                            |                                                              |
|    24    | 需求数量         |          |                                                              |                            |                                                              |
|    25    | 需求申请时间     |          |                                                              |                            |                                                              |
|    26    | 确认收货时间     |          |                                                              | 是                         | 时间范围选择                                                 |
|    27    | 采购合同创建时间 |          |                                                              |                            |                                                              |
|    28    | 返还类型         |          |                                                              |                            |                                                              |
|    29    | 场地运作         |          |                                                              |                            |                                                              |
|    30    | 成本状态         |  右固定  | 新增字段<br/>**枚举值：**<br/>    待变更合同、待开单、部分完成、已完成 |                            |                                                              |
|    31    | 确认收货数量     |  右固定  | 原字段重排序                                                 |                            |                                                              |
|    32    | 已变更合同数量   |  右固定  | 新增字段<br/>已执行合同变更的数量<br/>点击打开合同变更明细弹窗 |                            |                                                              |
|    33    | 已开单数量       |  右固定  | 新增字段<br/>已执行合同变更并且已执行销售开单的数量          |                            |                                                              |

?> 以下字段均为**确认出库明细**原有字段，按原有顺序排列展示

| 显示顺序 | 字段名称           |   属性   | 描述                                                         | 查询条件（按列表顺序展示） | 查询规则                                         |
| :------: | ------------------ | :------: | :----------------------------------------------------------- | :------------------------- | :----------------------------------------------- |
|    34    | 内部发货时间       |          | 以下字段均为原有字段，按原有顺序排列展示                     |                            |                                                  |
|    35    | 物流签收时间       |          |                                                              |                            |                                                  |
|    36    | NC操作时间         |          |                                                              |                            |                                                  |
|    37    | 发货数量           |          |                                                              |                            |                                                  |
|    38    | 销售单价（含税）   |          |                                                              |                            |                                                  |
|    39    | 紧急程度           |          |                                                              |                            |                                                  |
|    40    | 审批状态           |          |                                                              |                            |                                                  |
|    41    | 审批人             |          |                                                              |                            |                                                  |
|    42    | 审批时间           |          |                                                              |                            |                                                  |
|    43    | 状态               |          |                                                              |                            |                                                  |
|    44    | 物流单号           |          |                                                              |                            |                                                  |
|    45    | 旧件返还数量       |          |                                                              |                            |                                                  |
|    46    | 旧件返还批次号     |          |                                                              |                            |                                                  |
|    47    | 未用数量（好还）   |          |                                                              |                            |                                                  |
|    48    | 未用批次号（好还） |          |                                                              |                            |                                                  |
|    49    | 还货日期           |          |                                                              |                            |                                                  |
|    50    | 是否有质量问题     |          |                                                              |                            |                                                  |
|    51    | 质量问题类型       |          |                                                              |                            |                                                  |
|    52    | 问题备注           |          |                                                              |                            |                                                  |
|    53    | 是否有随货同行单   |          |                                                              |                            |                                                  |
|    54    | 同行单图片         |          |                                                              |                            |                                                  |
|    55    | 未收到货日志       |          |                                                              |                            |                                                  |
|    56    | 申请付款时间       |          |                                                              |                            |                                                  |
|    57    | 付款时间           |          |                                                              |                            |                                                  |
|    58    | 同行单上传时间     |          |                                                              |                            |                                                  |
|    59    | 同行单上传人       |          |                                                              |                            |                                                  |
|    60    | 生产日期           |          |                                                              |                            |                                                  |
|    61    | 有效期             |          |                                                              |                            |                                                  |
|    62    | 用友到货单号       |          |                                                              |                            |                                                  |
|    63    | 需求来源           |          |                                                              |                            |                                                  |
|    64    | 关联仓库           |          |                                                              |                            |                                                  |



### 执行变更合同

#### 变更规则

1. insert CT_MANAGE 
   - 根据当前合同pk（例如a）复制当前行并插入新记录
     - 其中：
       - PK_CT_MANAGE为新值例如b
       - ACTIVEFLAG = 1
       - **PK_ORIGN** = 当前合同pk（例如a）
       - 其他字段于原纪录相同；

2. update CT_MANAGE 
   - 更新当前合同pk（例如a）对应的记录，where PK_CT_MANAGE = a
   	 - 其中：
   	   - VERSION 加**1.0**
   	   - TS 当前时间
   	   - CLASTOPERATORID 最后修改人 取当前操作人
   	   - TLASTMAKETIME 最后修改时间 取当前时间

3. insert CT_MANAGE_B

   - 根据当前合同CT_MANAGE_B表中的记录复制并插入新记录，基于PK_CT_MANAGE = a

     - 其中：

       - PK_CT_MANAGE 为步骤1中的新值b

       - PK_CT_MANAGE_B 创建新主键

       - 其他字段与原纪录相同

       - 且原合同中存在X行记录，便插入X行新记录

4. insert CT_MANAGE_B

   - 根据收货商品明细，新增记录
     - 其中：
       - PK_CT_MANAGE 为原合同主键a
       - PK_CT_MANAGE_B 创建新主键
       - CROWNO 为原记录CROWNO字段值加10，多行记录时依次加10
       - 其他为商品相关字段：商品、数量、单价、金额等

5. insert CT_CHANGE_BB1

   - 新增变更记录
     - 其中：
       - CHANGECODE 原记录最大值加**1.0**
       - CHGDATE 当前日期
       - CHGPSN 用户名
       - PK_CT_CHANGE 新主键
       - TS 取当前时间
       - 其他字段于原最新记录相同


#### 变更SQL

##### 步骤1

```sql
/*步骤1，根据该表主键复制整行数据，以新主键插入新记录*/
INSERT INTO CT_MANAGE (
	"ACTIVEFLAG",
	"ACTUALINVALIDATE",
	"ACTUALVALIDATE",
	"ASTCURRATE",
	"AUDIID",
	"AUDITDATE",
	"BORDERNUMEXEC",
	"BSC",
	"CLASTOPERATORID",
	"CT_CODE",
	"CT_NAME",
	"CT_TEMPLET_ID",
	"CTFLAG",
	"CURRID",
	"CURRRATE",
	"CUSTID",
	"CUSTUNIT",
	"DEF1",
	"DEF10",
	"DEF11",
	"DEF12",
	"DEF13",
	"DEF14",
	"DEF15",
	"DEF16",
	"DEF17",
	"DEF18",
	"DEF19",
	"DEF2",
	"DEF20",
	"DEF3",
	"DEF4",
	"DEF5",
	"DEF6",
	"DEF7",
	"DEF8",
	"DEF9",
	"DELIADDR",
	"DEPID",
	"DR",
	"IFEARLY",
	"INVALLIDATE",
	"IPRINTCOUNT",
	"NARAPTOTALGPAMOUNT",
	"NORIGPSHAMOUNT",
	"NORIPREPAYMNY",
	"NORITOTALGPAMOUNT",
	"NPREPAYLIMITMNY",
	"NPREPAYMNY",
	"NTOTALGPAMOUNT",
	"NTOTALGPSHAMOUNT",
	"OPERDATE",
	"OPERID",
	"PAYALARMDAY",
	"PAYTERM",
	"PERSONNELID",
	"PK_CORP",
	"PK_CT_MANAGE",
	"PK_CT_TYPE",
	"PK_DEFDOC1",
	"PK_DEFDOC10",
	"PK_DEFDOC11",
	"PK_DEFDOC12",
	"PK_DEFDOC13",
	"PK_DEFDOC14",
	"PK_DEFDOC15",
	"PK_DEFDOC16",
	"PK_DEFDOC17",
	"PK_DEFDOC18",
	"PK_DEFDOC19",
	"PK_DEFDOC2",
	"PK_DEFDOC20",
	"PK_DEFDOC3",
	"PK_DEFDOC4",
	"PK_DEFDOC5",
	"PK_DEFDOC6",
	"PK_DEFDOC7",
	"PK_DEFDOC8",
	"PK_DEFDOC9",
	"PK_ORIGN",
	"PROJECTID",
	"RECALARMDAY",
	"SUBSCRIBEDATE",
	"TAUDITTIME",
	"TLASTMAKETIME",
	"TMAKETIME",
	"TRANSPMODE",
	"TS",
	"VALDATE",
	"VERSION" 
)
VALUES
	(
		'1',
		NULL,
		'2022-09-08',
		NULL,
		'0001K81000000000HG0C',
		'2022-09-08',
		NULL,
		'N',
		'0001K81000000000E2YQ',
		'STKAD22090800027',
		'代理商个人先垫付，公司回款后，退回个人打款',
		'3500                ',
		'2',
		'00010000000000000001',
		'1',
		'0001O1100000000FKD3D',
		NULL,
		'博莱科',
		'2022-09-08',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'纯新签传统',
		'Y',
		'中国医科大学附属第一医院',
		'医院传统业务-打包专用',
		NULL,
		'显微镜与造影设备',
		'辽宁省',
		'代理商',
		NULL,
		NULL,
		NULL,
		NULL,
		'0001O41000063865H596',
		'1006K8100000000001AM',
		'0',
		'N',
		'2025-09-08',
		'0',
		'3700',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'2022-09-08',
		'0001O110000000069J4T',
		NULL,
		NULL,
		'1006K8100000000008MM',
		'1006',
		'1006O110000001000001',
		'1006K810000000000350',
		'0001O1100000000F6672',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'0001O1100000000BNZI3',
		'0001O110000000061LVA',
		'0001K81000000003XF7W',
		'0001K810000000000KU1',
		NULL,
		'0001O1100000000974M0',
		'0001K810000000000KK9',
		'0001K810000000000KUE',
		NULL,
		NULL,
		NULL,
		NULL,
		'1006O11000000000RKDH',
		'1009K81000000000078O',
		NULL,
		'2022-09-07',
		'2022-09-08 09:38:40',
		'2023-05-11 16:08:24',
		'2022-09-08 09:37:13',
		NULL,
		'2023-05-11 16:08:24',
		'2022-09-08',
	'2.0' 
	);

```

##### 步骤2

```sql
/*步骤2，基于原主键修改该合同主表版本号，版本+1*/
UPDATE CT_MANAGE 
SET "NARAPTOTALGPAMOUNT" = 3900,
	"VERSION" = '3.0'
WHERE "PK_CT_MANAGE" = '1006O11000000000RKDH' ;

```

##### 步骤3

```sql
/*步骤3，子表原数据以新主键重新插入（复制行），且关联的主表主键为步骤1中的主表新主键*/
/*原数据有几行，就重新插入几行*/
INSERT INTO CT_MANAGE_B (
	"AMOUNT",
	"ASTMEASID",
	"ASTNUM",
	"ASTPRICE",
	"ASTSUM",
	"ASTTAXMNY",
	"ASTTAXPRICE",
	"ASTTAXSUMMNY",
	"BRETURNPROFIT",
	"BSAFEPRICE",
	"CASSETID",
	"CPRICETABLEID",
	"CQPBASESCHEMEID",
	"CRECADDRNODEID",
	"CRECEIPTAREAID",
	"CRECEIPTCORPID",
	"CROWNO",
	"CSOURCEBILLBBID",
	"CSOURCEBILLBID",
	"CSOURCEBILLCODE",
	"CSOURCEBILLHID",
	"CSOURCEBILLTYPE",
	"CSOURCEROWNO",
	"CTRANSPMODEID",
	"DEF1",
	"DEF10",
	"DEF11",
	"DEF12",
	"DEF13",
	"DEF14",
	"DEF15",
	"DEF16",
	"DEF17",
	"DEF18",
	"DEF19",
	"DEF2",
	"DEF20",
	"DEF3",
	"DEF4",
	"DEF5",
	"DEF6",
	"DEF7",
	"DEF8",
	"DEF9",
	"DELIVDATE",
	"DR",
	"EARLYDATE",
	"INOUTNUM",
	"INOUTSUM",
	"INVCLID",
	"INVID",
	"INVOICESUM",
	"INVOICNUM",
	"MEASID",
	"NATIPRICE",
	"NATISUM",
	"NATITAXMNY",
	"NATITAXPRICE",
	"NATITAXSUMMNY",
	"NORITOTALGPMNY",
	"NORITOTALSHGPMNY",
	"NTOTALGPMNY",
	"NTOTALSHGPMNY",
	"ORDNUM",
	"ORDPRICE",
	"ORDSUM",
	"ORIPRICE",
	"ORISUM",
	"ORITAXMNY",
	"ORITAXPRICE",
	"ORITAXSUMMNY",
	"PAYSUM",
	"PK_CORP",
	"PK_CT_MANAGE",
	"PK_CT_MANAGE_B",
	"PK_DEFDOC1",
	"PK_DEFDOC10",
	"PK_DEFDOC11",
	"PK_DEFDOC12",
	"PK_DEFDOC13",
	"PK_DEFDOC14",
	"PK_DEFDOC15",
	"PK_DEFDOC16",
	"PK_DEFDOC17",
	"PK_DEFDOC18",
	"PK_DEFDOC19",
	"PK_DEFDOC2",
	"PK_DEFDOC20",
	"PK_DEFDOC3",
	"PK_DEFDOC4",
	"PK_DEFDOC5",
	"PK_DEFDOC6",
	"PK_DEFDOC7",
	"PK_DEFDOC8",
	"PK_DEFDOC9",
	"SOPRICEID",
	"SRCECBID",
	"SRCECID",
	"SRCECTYPE",
	"TAXRATION",
	"TRANSRATE",
	"TS",
	"VBATCHCODE",
	"VFREE1",
	"VFREE2",
	"VFREE3",
	"VFREE4",
	"VFREE5",
	"VRECEIVEADDRESS" 
)
VALUES
	(
		'1',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'10',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'3354.45',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'0',
		NULL,
		NULL,
		NULL,
		NULL,
		'0001O1100000000FF547',
		NULL,
		NULL,
		'0001K8100000000002H2',
		'3097.34513',
		'3097.35',
		'402.65',
		'3500',
		'3500',
		NULL,
		NULL,
		NULL,
		NULL,
		'1',
		NULL,
		'3500',
		'3097.34513',
		'3097.35',
		'402.65',
		'3500',
		'3500',
		NULL,
		'1006',
		'1006O110000001000001',
		'1006O110000002000001',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'13',
		NULL,
		'2022-09-08 09:40:26',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
	NULL 
	);

```

##### 步骤4

```sql
/*步骤4，根据商品编码即核算单位ID在NC中查询存货管理档案id，用于步骤4中商品ID字段的赋值*/
SELECT
	BD_INVMANDOC.PK_INVMANDOC ,
	BD_INVBASDOC.INVCODE ,
	BD_INVBASDOC.INVNAME
FROM
	BD_INVMANDOC BD_INVMANDOC
LEFT JOIN BD_INVBASDOC BD_INVBASDOC ON
BD_INVMANDOC.PK_INVBASDOC = BD_INVBASDOC.PK_INVBASDOC
WHERE
BD_INVBASDOC.INVCODE = '商品编码'
AND BD_INVMANDOC.PK_CORP = '核算单位NCid';

```



```sql
/*步骤4，将需要变更操作对应的记录翻译后插入子表中，存在多行的情况*/
INSERT INTO CT_MANAGE_B (
	"AMOUNT",
	"ASTMEASID",
	"ASTNUM",
	"ASTPRICE",
	"ASTSUM",
	"ASTTAXMNY",
	"ASTTAXPRICE",
	"ASTTAXSUMMNY",
	"BRETURNPROFIT",
	"BSAFEPRICE",
	"CASSETID",
	"CPRICETABLEID",
	"CQPBASESCHEMEID",
	"CRECADDRNODEID",
	"CRECEIPTAREAID",
	"CRECEIPTCORPID",
	"CROWNO",
	"CSOURCEBILLBBID",
	"CSOURCEBILLBID",
	"CSOURCEBILLCODE",
	"CSOURCEBILLHID",
	"CSOURCEBILLTYPE",
	"CSOURCEROWNO",
	"CTRANSPMODEID",
	"DEF1",
	"DEF10",
	"DEF11",
	"DEF12",
	"DEF13",
	"DEF14",
	"DEF15",
	"DEF16",
	"DEF17",
	"DEF18",
	"DEF19",
	"DEF2",
	"DEF20",
	"DEF3",
	"DEF4",
	"DEF5",
	"DEF6",
	"DEF7",
	"DEF8",
	"DEF9",
	"DELIVDATE",
	"DR",
	"EARLYDATE",
	"INOUTNUM",
	"INOUTSUM",
	"INVCLID",
	"INVID",
	"INVOICESUM",
	"INVOICNUM",
	"MEASID",
	"NATIPRICE",
	"NATISUM",
	"NATITAXMNY",
	"NATITAXPRICE",
	"NATITAXSUMMNY",
	"NORITOTALGPMNY",
	"NORITOTALSHGPMNY",
	"NTOTALGPMNY",
	"NTOTALSHGPMNY",
	"ORDNUM",
	"ORDPRICE",
	"ORDSUM",
	"ORIPRICE",
	"ORISUM",
	"ORITAXMNY",
	"ORITAXPRICE",
	"ORITAXSUMMNY",
	"PAYSUM",
	"PK_CORP",
	"PK_CT_MANAGE",
	"PK_CT_MANAGE_B",
	"PK_DEFDOC1",
	"PK_DEFDOC10",
	"PK_DEFDOC11",
	"PK_DEFDOC12",
	"PK_DEFDOC13",
	"PK_DEFDOC14",
	"PK_DEFDOC15",
	"PK_DEFDOC16",
	"PK_DEFDOC17",
	"PK_DEFDOC18",
	"PK_DEFDOC19",
	"PK_DEFDOC2",
	"PK_DEFDOC20",
	"PK_DEFDOC3",
	"PK_DEFDOC4",
	"PK_DEFDOC5",
	"PK_DEFDOC6",
	"PK_DEFDOC7",
	"PK_DEFDOC8",
	"PK_DEFDOC9",
	"SOPRICEID",
	"SRCECBID",
	"SRCECID",
	"SRCECTYPE",
	"TAXRATION",
	"TRANSRATE",
	"TS",
	"VBATCHCODE",
	"VFREE1",
	"VFREE2",
	"VFREE3",
	"VFREE4",
	"VFREE5",
	"VRECEIVEADDRESS" 
)
VALUES
	(
		'2',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'20',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'100.00',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'0',
		NULL,
		NULL,
		NULL,
		NULL,
		'0001K81000000004CTQ8',
		NULL,
		NULL,
		'0001K8100000000002GU',
		'88.49558',
		'176.99',
		'23.01',
		'100',
		'200',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'88.49558',
		'176.99',
		'23.01',
		'100',
		'200',
		NULL,
		'1006',
		'1006O110000001000001',
		'1006O110000002000002',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		'13',
		NULL,
		'2023-05-11 16:08:24',
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
		NULL,
	NULL 
	);
```

##### 步骤5

```sql
/*步骤5，插入变更历史，变更版本+1*/
INSERT INTO CT_CHANGE_BB1 ( "CHANGECODE", "CHGCONTENT", "CHGDATE", "CHGPSN", "CHGREASON", "DR", "MEMO", "PK_CORP", "PK_CT_CHANGE", "PK_CT_MANAGE", "TS" )
VALUES
	( '3.0', NULL, '2023-05-11', 'demo                ', NULL, '0', NULL, '1006', '1006O110000003000003', '1006O11000000000RKDH', '2023-05-11 16:08:25' );
```



---

## 销售合同

### 销售合同列表

#### 查询条件

!> 销售合同列表查询条件字段参照**销售合同详情-基本信息**字段表格的规则

#### 列表界面

!> 销售合同列表字段参照**销售合同详情-基本信息**字段表格的规则

### 销售合同详情

#### 基本信息

!> 参照类字段后台表中应默认保存被参照档案的ID(主键)及名称

?> 对应NC数据库表 `ct_manage`

| 显示顺序 | 字段名称         | 类型                               | NC字段映射      |
| :------: | :--------------- | ---------------------------------- | --------------- |
|    1     | 销售合同号       | 文本                               | ct_code         |
|    2     | 客户             | 参照往来单位                       | custid          |
|    3     | 核算单位         | 参照核算单位                       | pk_corp         |
|    4     | 合同类型         | 参照基础档案<br />（采购合同类型） | pk_ct_type      |
|    5     | 客商属性         | 参照                               | def5            |
|    6     | 产品线           | 参照                               | def1            |
|    7     | 销售合同类型     | 参照                               | projectid       |
|    8     | 最终用户         | 参照往来单位                       | def19           |
|    9     | 部门             | 参照部门档案                       | depid           |
|    10    | 人员             | 参照员工档案                       | personnelid     |
|    11    | 合同签订日期     | 日期                               | subscribedate   |
|    12    | 二级业务单元     | 参照                               | def3            |
|    13    | 计划生效日期     | 日期                               | valdate         |
|    14    | 计划终止日期     | 日期                               | invallidate     |
|    15    | 省内分区         | 参照                               | def2            |
|    16    | 服务开始时间     | 日期                               | def7            |
|    17    | 服务结束时间     | 日期                               | def8            |
|    18    | 业绩类型         | 参照                               | def17           |
|    19    | 业绩归属省市     | 参照                               | def4            |
|    20    | 合同状态         | 枚举                               | ctflag          |
|    21    | 开单状态         | 枚举                               | 中台字段        |
|    22    | 版本号           | 文本                               | version         |
|    23    | 制单人           | 参照员工档案                       | operid          |
|    24    | 交货地点         | 参照客商发货地址                   | deliaddr        |
|    25    | 上传文本合同时间 | 日期时间                           | def10           |
|    26    | 合同终止原因     | 参照合同终止原因                   | pk_defdoc13     |
|    27    | 制单日期         | 日期                               | operdate        |
|    28    | 制单时间         | 日期时间                           | tmaketime       |
|    29    | 审批人           | 参照员工档案                       | audiid          |
|    30    | 审批日期         | 日期                               | auditdate       |
|    31    | 审批时间         | 日期时间                           | taudittime      |
|    32    | 最后修改人       | 参照员工档案                       | clastoperatorid |
|    33    | 最后修改时间     | 日期时间                           | tlastmaketime   |
|    34    | 创建方式         | 枚举                               | 中台字段        |
|    35    | 更新时间         | 日期时间                           | 中台字段        |
|    36    | 备注             | 文本                               | 中台字段        |

#### 合同标的

?> 对应NC数据库表 `ct_manage_b`

| 显示顺序 | 字段名称                              | 类型                       | NC字段映射   |
| :------: | :------------------------------------ | -------------------------- | ------------ |
|    1     | 行号                                  | 文本                       | crowno       |
|    2     | 商品编码                              | 参照商品档案               | invid        |
|    3     | 商品名称                              | 文本                       | 编码关联字段 |
|    4     | 规格                                  | 文本                       | 编码关联字段 |
|    5     | 型号                                  | 文本                       | 编码关联字段 |
|    6     | 品牌                                  | 文本                       | 编码关联字段 |
|    7     | 数量                                  | 数值                       | amount       |
|    8     | 单位                                  | 参照计量单位               | measid       |
|    9     | 销售单价(含税)                        | 数值                       | oritaxprice  |
|  ~~10~~  | ~~采购单价(含税)~~ 20230627删除该字段 | 数值                       |              |
|  ~~11~~  | ~~采购单价(无税)~~ 20230627删除该字段 | 数值                       |              |
|    12    | 税率                                  | 数值                       | taxration    |
|    13    | 采购开始时间                          | 日期                       | def8         |
|    14    | 服务开始时间                          | 日期                       | def9         |
|    15    | 服务结束时间                          | 日期                       | def10        |
|          | 备注                                  | 文本<br />20230627新增字段 | def15        |
|    16    | 是否医疗件                            |                            | 中台字段     |
|    17    | 注册证号                              | 文本                       | 中台字段     |
|    18    | 质保期                                |                            | 中台字段     |
|    19    | 期望交期                              |                            | 中台字段     |
|    20    | NC编码                                | 文本                       | 中台字段     |
|    21    | 是否赠品                              |                            | 中台字段     |
#### 操作日志

?> 中台表，NC销售合同中不存在映射关系

| 显示顺序 | 字段名称 | 备注 |
| :------: | :------- | ---- |
|    1     | 操作人   |      |
|    2     | 日志类型 |      |
|    3     | 事件类型 |      |
|    4     | 发生时间 |      |
|    5     | 描述     |      |
|    6     | 备注     |      |

#### 合同收款约定

?> 对应NC数据库表 `ct_memora_bb2`

| 显示顺序 | 字段名称     | 类型     | NC字段映射 |
| :------: | :----------- | -------- | ---------- |
|    1     | 收款计划时间 | 文本     | memoracode |
|    2     | 金额         | NC为文本 | memora     |
|    3     | 收款计划编号 | 文本     | memo       |
|    4     | 备注         |          | **待定**   |

#### 变更历史

?> 对应NC数据库表 `ct_change_bb1`

| 显示顺序 | 字段名称 | 类型     | NC字段映射 |
| :------: | :------- | -------- | ---------- |
|    1     | 版本号   | 文本     | changecode |
|    2     | 变更人   | 参照人员 | chgpsn     |
|    3     | 变更日期 | 日期     | chgdate    |
|    4     | 变更原因 | 文本     | chgreason  |
|    5     | 备注     | 文本     | memo       |

#### 执行过程

?> 对应NC数据库表 `ct_manage_exec`

| 显示顺序 | 字段名称 | 类型 | NC字段映射 |
| :------: | :------- | ---- | ---------- |
|    1     | 执行流程 | 文本 | execflow   |
|    2     | 日期     | 日期 | execdate   |
|    3     | 原因     | 文本 | execreason |

#### 开单信息

?> 该合同相关的销售订单记录，仅展示销售订单基本信息中的部分字段

| 显示顺序 | 字段名称   | 备注 |
| :------: | :--------- | ---- |
|    1     | 销售订单号 |      |
|    2     | 是否退货   |      |
|    3     | 订单状态   |      |
|    4     | 订单金额   |      |
|    5     | 制单人     |      |
|    6     | 制单时间   |      |
|    7     | 更新时间   |      |

<br/>

### 拉取销售合同SQL

#### 主表

```sql
SELECT
/*激活状态*/
	CT_MANAGE.ACTIVEFLAG,
/*实际终止日期*/
	CT_MANAGE.ACTUALINVALIDATE,
/*实际生效日期*/
	CT_MANAGE.ACTUALVALIDATE,
/*折辅汇率*/
	CT_MANAGE.ASTCURRATE,
/*审核日期*/
	CT_MANAGE.AUDITDATE,
/*已生成订单量作为合同执行*/
	CT_MANAGE.BORDERNUMEXEC,
/*是否委外*/
	CT_MANAGE.BSC,
/*合同编码*/
	CT_MANAGE.CT_CODE,
/*合同名称*/
	CT_MANAGE.CT_NAME,
/*合同模版*/
	CT_MANAGE.CT_TEMPLET_ID,
/*合同状态*/
	CT_MANAGE.CTFLAG,
/*币种*/
	CT_MANAGE.CURRID,
/*折本汇率*/
	CT_MANAGE.CURRRATE,
/*对方单位说明*/
	CT_MANAGE.CUSTUNIT,
/*自定义项1*/
	CT_MANAGE.DEF1,
/*自定义项10*/
	CT_MANAGE.DEF10,
/*自定义项11*/
	CT_MANAGE.DEF11,
/*自定义项12*/
	CT_MANAGE.DEF12,
/*自定义项13*/
	CT_MANAGE.DEF13,
/*自定义项14*/
	CT_MANAGE.DEF14,
/*自定义项15*/
	CT_MANAGE.DEF15,
/*自定义项16*/
	CT_MANAGE.DEF16,
/*自定义项17*/
	CT_MANAGE.DEF17,
/*自定义项18*/
	CT_MANAGE.DEF18,
/*自定义项19*/
	CT_MANAGE.DEF19,
/*自定义项2*/
	CT_MANAGE.DEF2,
/*自定义项20*/
	CT_MANAGE.DEF20,
/*自定义项3*/
	CT_MANAGE.DEF3,
/*自定义项4*/
	CT_MANAGE.DEF4,
/*自定义项5*/
	CT_MANAGE.DEF5,
/*自定义项6*/
	CT_MANAGE.DEF6,
/*自定义项7*/
	CT_MANAGE.DEF7,
/*自定义项8*/
	CT_MANAGE.DEF8,
/*自定义项9*/
	CT_MANAGE.DEF9,
/*部门id*/
	CT_MANAGE.DEPID,
/*删除标志*/
	CT_MANAGE.DR,
/*是否期初*/
	CT_MANAGE.IFEARLY,
/*计划失效日期*/
	CT_MANAGE.INVALLIDATE,
/*打印次数*/
	CT_MANAGE.IPRINTCOUNT,
/*财务原币累计收/付款总额*/
	CT_MANAGE.NARAPTOTALGPAMOUNT,
/*累计原币应收/付款总额*/
	CT_MANAGE.NORIGPSHAMOUNT,
/*原币预付款*/
	CT_MANAGE.NORIPREPAYMNY,
/*累计原币收付款总额*/
	CT_MANAGE.NORITOTALGPAMOUNT,
/*原币预付款限额*/
	CT_MANAGE.NPREPAYLIMITMNY,
/*本币预付款*/
	CT_MANAGE.NPREPAYMNY,
/*累计本币收付款总额*/
	CT_MANAGE.NTOTALGPAMOUNT,
/*累计本币应收/付款总额*/
	CT_MANAGE.NTOTALGPSHAMOUNT,
/*制单日期*/
	CT_MANAGE.OPERDATE,
/*付款计划报警*/
	CT_MANAGE.PAYALARMDAY,
/*收付款协议*/
	CT_MANAGE.PAYTERM,
/*合同主键*/
	CT_MANAGE.PK_CT_MANAGE,
/*自定义项主键1*/
	CT_MANAGE.PK_DEFDOC1,
/*自定义项主键10*/
	CT_MANAGE.PK_DEFDOC10,
/*自定义项主键11*/
	CT_MANAGE.PK_DEFDOC11,
/*自定义项主键12*/
	CT_MANAGE.PK_DEFDOC12,
/*自定义项主键13*/
	CT_MANAGE.PK_DEFDOC13,
/*自定义项主键14*/
	CT_MANAGE.PK_DEFDOC14,
/*自定义项主键15*/
	CT_MANAGE.PK_DEFDOC15,
/*自定义项主键16*/
	CT_MANAGE.PK_DEFDOC16,
/*自定义项主键17*/
	CT_MANAGE.PK_DEFDOC17,
/*自定义项主键18*/
	CT_MANAGE.PK_DEFDOC18,
/*自定义项主键19*/
	CT_MANAGE.PK_DEFDOC19,
/*自定义项主键2*/
	CT_MANAGE.PK_DEFDOC2,
/*自定义项主键20*/
	CT_MANAGE.PK_DEFDOC20,
/*自定义项主键3*/
	CT_MANAGE.PK_DEFDOC3,
/*自定义项主键4*/
	CT_MANAGE.PK_DEFDOC4,
/*自定义项主键5*/
	CT_MANAGE.PK_DEFDOC5,
/*自定义项主键6*/
	CT_MANAGE.PK_DEFDOC6,
/*自定义项主键7*/
	CT_MANAGE.PK_DEFDOC7,
/*自定义项主键8*/
	CT_MANAGE.PK_DEFDOC8,
/*自定义项主键9*/
	CT_MANAGE.PK_DEFDOC9,
/*原始合同PK*/
	CT_MANAGE.PK_ORIGN,
/*收获计划报警*/
	CT_MANAGE.RECALARMDAY,
/*合同签订日期*/
	CT_MANAGE.SUBSCRIBEDATE,
/*审批时间*/
	CT_MANAGE.TAUDITTIME,
/*最后修改时间*/
	CT_MANAGE.TLASTMAKETIME,
/*制单时间*/
	CT_MANAGE.TMAKETIME,
/*运输方式*/
	CT_MANAGE.TRANSPMODE,
/*计划生效日期*/
	CT_MANAGE.VALDATE,
/*版本号*/
	CT_MANAGE.VERSION,
/*合同类型主键*/
	CT_MANAGE.PK_CT_TYPE,
/*合同类型编码*/
	CT_TYPE.TYPECODE,
/*合同类型名称*/
	CT_TYPE.TYPENAME,
/*核算单位主键*/
	CT_MANAGE.PK_CORP,
/*核算单位编码*/
	BD_CORP.UNITCODE,
/*核算单位名称*/
	BD_CORP.UNITNAME,
/*客商ID*/
	CT_MANAGE.CUSTID,
/*客商编码*/
	BD_CUBASDOC.CUSTCODE,
/*客商名称*/
	BD_CUBASDOC.CUSTNAME,
/*制单人ID*/
	CT_MANAGE.OPERID,
/*制单人编码*/
	SM_USER.USER_CODE,
/*制单人名称*/
	SM_USER.USER_NAME,
/*审核人ID*/
	CT_MANAGE.AUDIID,
/*审核人编码*/
	SM_USER2.USER_CODE USER_CODE2,
/*审核人名称*/
	SM_USER2.USER_NAME USER_NAME2,
/*最后修改人ID*/
	CT_MANAGE.CLASTOPERATORID,
/*最后修改人编码*/
	SM_USER3.USER_CODE USER_CODE3,
/*最后修改人名称*/
	SM_USER3.USER_NAME USER_NAME3,
/*人员ID*/
	CT_MANAGE.PERSONNELID,
/*人员编码*/
	BD_PSNDOC.PSNCODE,
/*人员名称*/
	BD_PSNDOC.PSNNAME,
/*项目管理ID*/
	CT_MANAGE.PROJECTID,
/*项目基本ID*/
	BD_JOBMNGFIL.PK_JOBBASFIL,
/*项目编码*/
	BD_JOBBASFIL.JOBCODE,
/*项目名称*/
	BD_JOBBASFIL.JOBNAME,
/*收货地址ID*/
	CT_MANAGE.DELIADDR,
/*收货地址名称*/
	BD_CUSTADDR.ADDRNAME,
/*时间戳*/
	CT_MANAGE.TS 
FROM
	CT_MANAGE CT_MANAGE
	LEFT JOIN CT_TYPE CT_TYPE ON CT_TYPE.PK_CT_TYPE = CT_MANAGE.PK_CT_TYPE
	LEFT JOIN BD_CORP BD_CORP ON CT_MANAGE.PK_CORP = BD_CORP.PK_CORP
	LEFT JOIN BD_CUMANDOC BD_CUMANDOC ON CT_MANAGE.CUSTID = BD_CUMANDOC.PK_CUMANDOC
	LEFT JOIN BD_CUBASDOC BD_CUBASDOC ON BD_CUMANDOC.PK_CUBASDOC = BD_CUBASDOC.PK_CUBASDOC
	LEFT JOIN SM_USER SM_USER ON CT_MANAGE.OPERID = SM_USER.CUSERID
	LEFT JOIN SM_USER SM_USER2 ON CT_MANAGE.AUDIID = SM_USER2.CUSERID
	LEFT JOIN SM_USER SM_USER3 ON CT_MANAGE.CLASTOPERATORID = SM_USER3.CUSERID
	LEFT JOIN BD_PSNDOC BD_PSNDOC ON CT_MANAGE.PERSONNELID = BD_PSNDOC.PK_PSNDOC
	LEFT JOIN BD_JOBMNGFIL BD_JOBMNGFIL ON CT_MANAGE.PROJECTID = BD_JOBMNGFIL.PK_JOBMNGFIL
	LEFT JOIN BD_JOBBASFIL BD_JOBBASFIL ON BD_JOBBASFIL.PK_JOBBASFIL = BD_JOBMNGFIL.PK_JOBBASFIL
	LEFT JOIN BD_CUSTADDR BD_CUSTADDR ON BD_CUSTADDR.PK_CUSTADDR = CT_MANAGE.DELIADDR 
WHERE
/*过滤销售合同*/
	CT_TYPE.NBUSITYPE = 1;
```

#### 合同标的表

```sql
SELECT
/*数量*/
	CT_MANAGE_B.AMOUNT,
/*辅计量单位ID*/
	CT_MANAGE_B.ASTMEASID,
/*辅数量*/
	CT_MANAGE_B.ASTNUM,
/*辅币无税单价*/
	CT_MANAGE_B.ASTPRICE,
/*辅币无税金额*/
	CT_MANAGE_B.ASTSUM,
/*辅币税额*/
	CT_MANAGE_B.ASTTAXMNY,
/*辅币含税单价*/
	CT_MANAGE_B.ASTTAXPRICE,
/*辅币价税合计*/
	CT_MANAGE_B.ASTTAXSUMMNY,
/*是否参与返利*/
	CT_MANAGE_B.BRETURNPROFIT,
/*是否参与价保*/
	CT_MANAGE_B.BSAFEPRICE,
/*资产类别id*/
	CT_MANAGE_B.CASSETID,
/*价目表id*/
	CT_MANAGE_B.CPRICETABLEID,
/*优质优价方案ID*/
	CT_MANAGE_B.CQPBASESCHEMEID,
/*收货地点ID*/
	CT_MANAGE_B.CRECADDRNODEID,
/*收货地区ID*/
	CT_MANAGE_B.CRECEIPTAREAID,
/*收货单位ID*/
	CT_MANAGE_B.CRECEIPTCORPID,
/*行号*/
	CT_MANAGE_B.CROWNO,
/*来源单据子子表ID*/
	CT_MANAGE_B.CSOURCEBILLBBID,
/*来源单据子表行ID*/
	CT_MANAGE_B.CSOURCEBILLBID,
/*来源单据号*/
	CT_MANAGE_B.CSOURCEBILLCODE,
/*来源单据主表ID*/
	CT_MANAGE_B.CSOURCEBILLHID,
/*来源单据类型*/
	CT_MANAGE_B.CSOURCEBILLTYPE,
/*来源单据行号*/
	CT_MANAGE_B.CSOURCEROWNO,
/*运输方式id*/
	CT_MANAGE_B.CTRANSPMODEID,
/*自定义项1*/
	CT_MANAGE_B.DEF1,
/*自定义项11*/
	CT_MANAGE_B.DEF11,
/*自定义项12*/
	CT_MANAGE_B.DEF12,
/*自定义项13*/
	CT_MANAGE_B.DEF13,
/*自定义项14*/
	CT_MANAGE_B.DEF14,
/*自定义项15*/
	CT_MANAGE_B.DEF15,
/*自定义项16*/
	CT_MANAGE_B.DEF16,
/*自定义项17*/
	CT_MANAGE_B.DEF17,
/*自定义项18*/
	CT_MANAGE_B.DEF18,
/*自定义项19*/
	CT_MANAGE_B.DEF19,
/*自定义项2*/
	CT_MANAGE_B.DEF2,
/*自定义项20*/
	CT_MANAGE_B.DEF20,
/*自定义项3*/
	CT_MANAGE_B.DEF3,
/*自定义项4*/
	CT_MANAGE_B.DEF4,
/*自定义项5*/
	CT_MANAGE_B.DEF5,
/*自定义项6*/
	CT_MANAGE_B.DEF6,
/*自定义项7*/
	CT_MANAGE_B.DEF7,
/*自定义项8*/
	CT_MANAGE_B.DEF8,
/*计划收发货日期*/
	CT_MANAGE_B.DELIVDATE,
/*删除标志*/
	CT_MANAGE_B.DR,
/*期初制单日期*/
	CT_MANAGE_B.EARLYDATE,
/*期初出入库数量*/
	CT_MANAGE_B.INOUTNUM,
/*期初出入库含税金额*/
	CT_MANAGE_B.INOUTSUM,
/*存货分类ID*/
	CT_MANAGE_B.INVCLID,
/*期初开发票含税金额*/
	CT_MANAGE_B.INVOICESUM,
/*期初开发票数量*/
	CT_MANAGE_B.INVOICNUM,
/*本币无税单价*/
	CT_MANAGE_B.NATIPRICE,
/*本币无税金额*/
	CT_MANAGE_B.NATISUM,
/*本币税额*/
	CT_MANAGE_B.NATITAXMNY,
/*本币含税单价*/
	CT_MANAGE_B.NATITAXPRICE,
/*本币价税合计*/
	CT_MANAGE_B.NATITAXSUMMNY,
/*累计原币收付款金额*/
	CT_MANAGE_B.NORITOTALGPMNY,
/*累计原币应收/付款金额*/
	CT_MANAGE_B.NORITOTALSHGPMNY,
/*累计本币收付款金额*/
	CT_MANAGE_B.NTOTALGPMNY,
/*累计本币应收/付款金额*/
	CT_MANAGE_B.NTOTALSHGPMNY,
/*订单执行累计数量*/
	CT_MANAGE_B.ORDNUM,
/*订单执行累计含税单价*/
	CT_MANAGE_B.ORDPRICE,
/*订单执行累计原币价税合计*/
	CT_MANAGE_B.ORDSUM,
/*原币无税单价*/
	CT_MANAGE_B.ORIPRICE,
/*原币无税金额*/
	CT_MANAGE_B.ORISUM,
/*原币税额*/
	CT_MANAGE_B.ORITAXMNY,
/*原币含税单价*/
	CT_MANAGE_B.ORITAXPRICE,
/*原币价税合计*/
	CT_MANAGE_B.ORITAXSUMMNY,
/*期初回付款含税金额*/
	CT_MANAGE_B.PAYSUM,
/*公司主键*/
	CT_MANAGE_B.PK_CORP,
/*合同主键*/
	CT_MANAGE_B.PK_CT_MANAGE,
/*表体主键*/
	CT_MANAGE_B.PK_CT_MANAGE_B,
/*自定义项主键1*/
	CT_MANAGE_B.PK_DEFDOC1,
/*自定义项主键10*/
	CT_MANAGE_B.PK_DEFDOC10,
/*自定义项主键11*/
	CT_MANAGE_B.PK_DEFDOC11,
/*自定义项主键12*/
	CT_MANAGE_B.PK_DEFDOC12,
/*自定义项主键13*/
	CT_MANAGE_B.PK_DEFDOC13,
/*自定义项主键14*/
	CT_MANAGE_B.PK_DEFDOC14,
/*自定义项主键15*/
	CT_MANAGE_B.PK_DEFDOC15,
/*自定义项主键16*/
	CT_MANAGE_B.PK_DEFDOC16,
/*自定义项主键17*/
	CT_MANAGE_B.PK_DEFDOC17,
/*自定义项主键18*/
	CT_MANAGE_B.PK_DEFDOC18,
/*自定义项主键19*/
	CT_MANAGE_B.PK_DEFDOC19,
/*自定义项主键2*/
	CT_MANAGE_B.PK_DEFDOC2,
/*自定义项主键20*/
	CT_MANAGE_B.PK_DEFDOC20,
/*自定义项主键3*/
	CT_MANAGE_B.PK_DEFDOC3,
/*自定义项主键4*/
	CT_MANAGE_B.PK_DEFDOC4,
/*自定义项主键5*/
	CT_MANAGE_B.PK_DEFDOC5,
/*自定义项主键6*/
	CT_MANAGE_B.PK_DEFDOC6,
/*自定义项主键7*/
	CT_MANAGE_B.PK_DEFDOC7,
/*自定义项主键8*/
	CT_MANAGE_B.PK_DEFDOC8,
/*自定义项主键9*/
	CT_MANAGE_B.PK_DEFDOC9,
/*定价策略ID*/
	CT_MANAGE_B.SOPRICEID,
/*EC单据行号*/
	CT_MANAGE_B.SRCECBID,
/*EC单据号*/
	CT_MANAGE_B.SRCECID,
/*EC单据类型*/
	CT_MANAGE_B.SRCECTYPE,
/*税率*/
	CT_MANAGE_B.TAXRATION,
/*主辅计量换算率*/
	CT_MANAGE_B.TRANSRATE,
/*批次号*/
	CT_MANAGE_B.VBATCHCODE,
/*收货地址*/
	CT_MANAGE_B.VRECEIVEADDRESS,
/*存货管理ID*/
	CT_MANAGE_B.INVID,
/*存货基本ID*/
	BD_INVMANDOC.PK_INVBASDOC,
/*存货编码*/
	BD_INVBASDOC.INVCODE,
/*存货名称*/
	BD_INVBASDOC.INVNAME,
/*存货规格*/
	BD_INVBASDOC.INVSPEC,
/*存货型号*/
	BD_INVBASDOC.INVTYPE,
/*计量单位ID*/
	CT_MANAGE_B.MEASID,
/*计量单位编码*/
	BD_MEASDOC.SHORTNAME,
/*计量单位名称*/
	BD_MEASDOC.MEASNAME,
/*保修开始时间*/
	CT_MANAGE_B.DEF9,
/*保修结束时间*/
	CT_MANAGE_B.DEF10,
/*时间戳*/
	CT_MANAGE_B.TS 
FROM
	CT_MANAGE_B CT_MANAGE_B
	LEFT JOIN BD_INVMANDOC BD_INVMANDOC ON CT_MANAGE_B.INVID = BD_INVMANDOC.PK_INVMANDOC
	LEFT JOIN BD_INVBASDOC BD_INVBASDOC ON BD_INVMANDOC.PK_INVBASDOC = BD_INVBASDOC.PK_INVBASDOC
	LEFT JOIN BD_MEASDOC BD_MEASDOC ON CT_MANAGE_B.MEASID = BD_MEASDOC.PK_MEASDOC 
WHERE
	CT_MANAGE_B.PK_CT_MANAGE IN ( /*合同主表ID*/ );
```



## 销售订单

### 销售订单详情

#### 基本信息

?> 对应NC数据库表 `so_sale`

| 显示顺序 | 字段名称     | 类型             | NC字段映射      |
| :------: | :----------- | ---------------- | --------------- |
|    1     | 销售订单号   | 文本             | vreceiptcode    |
|    2     | 客户         | 参照客户档案     | ccustomerid     |
|    3     | 核算单位     | 参照核算单位     | pk_corp         |
|    4     | 客商属性     | 参照客商属性     | vdef5           |
|    5     | 产品线       | 参照产品线       | vdef1           |
|    6     | 销售订单类型 | 参照采购合同类型 | vdef15          |
|    7     | 最终用户     | 参照客商档案     | vdef19          |
|    8     | 部门         | 参照部门         | cdeptid         |
|    9     | 人员         | 参照人员         | cemployeeid     |
|    10    | 订单日期     | 文本             | dbilldate       |
|    11    | 二级业务单元 | 文本             | vdef3           |
|          | 省市         | 文本             | vdef4           |
|    12    | 省内分区     | 文本             | vdef2           |
|    13    | 订单状态     | 文本             | fstatus         |
|    14    | 版本号       | 文本             | editionnum      |
|    15    | 制单人       | 参照人员         | coperatorid     |
|    16    | 收货地址     | 文本             | vreceiveaddress |
|    17    | 制单日期     | 日期             | dmakedate       |
|    18    | 制单时间     | 日期时间         | dbilltime       |
|    19    | 审批人       | 参照人员         | capproveid      |
|    20    | 审批日期     | 日期             | dapprovedate    |
|    21    | 审批时间     | 日期时间         | daudittime      |
|    23    | 最后修改时间 | 日期时间         | dmoditime       |
|    24    | 创建方式     | 文本             | 中台字段        |
|    25    | 更新时间     | 日期时间         | 中台字段        |
|    26    | 备注         | 文本             | vnote           |

#### 商品明细

!> 订单商品明细关联两个NC数据表 `so_saleorder_b` `so_saleexecute`，其中未特殊表明的均为`so_saleorder_b`

| 显示顺序 | 字段名称                              | 类型                                   | NC字段映射                |
| :------: | :------------------------------------ | -------------------------------------- | ------------------------- |
|    1     | 行号                                  | 文本                                   | crowno                    |
|    2     | 商品编码                              | 参照商品档案                           | cinvbasdocid              |
|    3     | 商品名称                              |                                        | 编码关联字段              |
|    4     | 规格                                  |                                        | 编码关联字段              |
|    5     | 型号                                  |                                        | 编码关联字段              |
|    6     | 品牌                                  |                                        | 编码关联字段              |
|    7     | 数量                                  | 数值                                   | nnumber                   |
|    8     | 单位                                  | 参照计量单位                           | cunitid                   |
|    9     | 销售单价(含税)                        | 数值                                   | noriginalcurtaxprice      |
|  ~~10~~  | ~~采购单价(含税)~~ 20230627删除该字段 |                                        |                           |
|  ~~11~~  | ~~采购单价(无税)~~ 20230627删除该字段 |                                        |                           |
|    12    | 税率                                  | 数值                                   | ntaxrate                  |
|    13    | 出库实物类型                          | 参照采购合同类型                       | so_saleexecute.cprojectid |
|    14    | 服务开始时间                          | 日期                                   | vdef9                     |
|    15    | 服务结束时间                          | 日期                                   | vdef10                    |
|          | 备注                                  | 文本<br />20230627增加订单表体备注字段 | frownote                  |
|    16    | 是否医疗件                            |                                        | 中台字段                  |
|    17    | 注册证号                              |                                        | 中台字段                  |
|    18    | 质保期                                |                                        | 中台字段                  |
|    19    | 期望交期                              |                                        | 中台字段                  |
|    20    | NC编码                                | 文本                                   | 中台字段                  |
|    21    | 是否赠品                              | 文本                                   | blargessflag              |

#### 操作日志

?> 中台表，NC销售合同中不存在映射关系

| 显示顺序 | 字段名称 | 备注 |
| :------: | :------- | ---- |
|    1     | 操作人   |      |
|    2     | 日志类型 |      |
|    3     | 事件类型 |      |
|    4     | 发生时间 |      |
|    5     | 描述     |      |
|    6     | 备注     |      |

### 拉取销售订单SQL

#### 主表

```sql
SELECT
/*是否已协同生成采购订单*/
	SO_SALE.BCOOPTOPO,
/*是否散户*/
	SO_SALE.BFREECUSTFLAG,
/*期初标志*/
	SO_SALE.BINITFLAG,
/*开票关闭标记*/
	SO_SALE.BINVOICENDFLAG,
/*出库关闭标记*/
	SO_SALE.BOUTENDFLAG,
/*是否超帐期*/
	SO_SALE.BOVERDATE,
/*付款关闭标记*/
	SO_SALE.BPAYENDFLAG,
/*是否由采购订单协同生成*/
	SO_SALE.BPOCOOPTOME,
/*发货关闭标记*/
	SO_SALE.BRECEIPTENDFLAG,
/*退货标记*/
	SO_SALE.BRETINVFLAG,
/*运输关闭标志*/
	SO_SALE.BTRANSENDFLAG,
/*结算方式*/
	SO_SALE.CBALTYPEID,
/*业务类型*/
	SO_SALE.CBIZTYPE,
/*库存组织*/
	SO_SALE.CCALBODYID,
/*对方订单号*/
	SO_SALE.CCOOPPOHID,
/*信用证号*/
	SO_SALE.CCREDITNUM,
/*开户银行*/
	SO_SALE.CCUSTBANKID,
/*散户ID*/
	SO_SALE.CFREECUSTID,
/*收货地区*/
	SO_SALE.CRECEIPTAREAID,
/*开票单位*/
	SO_SALE.CRECEIPTCORPID,
/*收货单位*/
	SO_SALE.CRECEIPTCUSTOMERID,
/*单据类型*/
	SO_SALE.CRECEIPTTYPE,
/*销售组织*/
	SO_SALE.CSALECORPID,
/*销售主表ID*/
	SO_SALE.CSALEID,
/*收款协议*/
	SO_SALE.CTERMPROTOCOLID,
/*运输方式*/
	SO_SALE.CTRANSMODEID,
/*仓库*/
	SO_SALE.CWAREHOUSEID,
/*审批日期*/
	SO_SALE.DAPPROVEDATE,
/*审批时间*/
	SO_SALE.DAUDITTIME,
/*单据日期*/
	SO_SALE.DBILLDATE,
/*单据时间*/
	SO_SALE.DBILLTIME,
/*制单日期*/
	SO_SALE.DMAKEDATE,
/*最后修改时间*/
	SO_SALE.DMODITIME,
/*删除标志*/
	SO_SALE.DR,
/*修订人*/
	SO_SALE.EDITAUTHOR,
/*修订日期*/
	SO_SALE.EDITDATE,
/*修订版本号*/
	SO_SALE.EDITIONNUM,
/*发票类别*/
	SO_SALE.FINVOICECLASS,
/*发票类型*/
	SO_SALE.FINVOICETYPE,
/*状态*/
	SO_SALE.FSTATUS,
/*结算标志*/
	SO_SALE.IBALANCEFLAG,
/*打印次数*/
	SO_SALE.IPRINTCOUNT,
/*帐期*/
	SO_SALE.NACCOUNTPERIOD,
/*整单折扣*/
	SO_SALE.NDISCOUNTRATE,
/*预估运费*/
	SO_SALE.NEVALUATECARRIAGE,
/*金额合计*/
	SO_SALE.NHEADSUMMNY,
/*预收款金额*/
	SO_SALE.NPRECEIVEMNY,
/*预收款比例*/
	SO_SALE.NPRECEIVERATE,
/*订金*/
	SO_SALE.NSUBSCRIPTION,
/*自定义项主键1*/
	SO_SALE.PK_DEFDOC1,
/*自定义项主键10*/
	SO_SALE.PK_DEFDOC10,
/*自定义项主键11*/
	SO_SALE.PK_DEFDOC11,
/*自定义项主键12*/
	SO_SALE.PK_DEFDOC12,
/*自定义项主键13*/
	SO_SALE.PK_DEFDOC13,
/*自定义项主键14*/
	SO_SALE.PK_DEFDOC14,
/*自定义项主键15-销售订单类型主键*/
	SO_SALE.PK_DEFDOC15,
/*自定义项主键16*/
	SO_SALE.PK_DEFDOC16,
/*自定义项主键17*/
	SO_SALE.PK_DEFDOC17,
/*自定义项主键18*/
	SO_SALE.PK_DEFDOC18,
/*自定义项主键19*/
	SO_SALE.PK_DEFDOC19,
/*自定义项主键2*/
	SO_SALE.PK_DEFDOC2,
/*自定义项主键20*/
	SO_SALE.PK_DEFDOC20,
/*自定义项主键3*/
	SO_SALE.PK_DEFDOC3,
/*自定义项主键4*/
	SO_SALE.PK_DEFDOC4,
/*自定义项主键5*/
	SO_SALE.PK_DEFDOC5,
/*自定义项主键6*/
	SO_SALE.PK_DEFDOC6,
/*自定义项主键7*/
	SO_SALE.PK_DEFDOC7,
/*自定义项主键8*/
	SO_SALE.PK_DEFDOC8,
/*自定义项主键9*/
	SO_SALE.PK_DEFDOC9,
/*会计年度*/
	SO_SALE.VACCOUNTYEAR,
/*自定义项1-产品线*/
	SO_SALE.VDEF1,
/*自定义项10*/
	SO_SALE.VDEF10,
/*自定义项11*/
	SO_SALE.VDEF11,
/*自定义项12*/
	SO_SALE.VDEF12,
/*自定义项13*/
	SO_SALE.VDEF13,
/*自定义项14*/
	SO_SALE.VDEF14,
/*自定义项15-销售订单类型*/
	SO_SALE.VDEF15,
/*自定义项16*/
	SO_SALE.VDEF16,
/*自定义项17*/
	SO_SALE.VDEF17,
/*自定义项18*/
	SO_SALE.VDEF18,
/*自定义项19-最终用户*/
	SO_SALE.VDEF19,
/*自定义项2-省内分区*/
	SO_SALE.VDEF2,
/*自定义项20*/
	SO_SALE.VDEF20,
/*自定义项3-二级业务单元*/
	SO_SALE.VDEF3,
/*自定义项4-省市*/
	SO_SALE.VDEF4,
/*自定义项5-客商属性*/
	SO_SALE.VDEF5,
/*自定义项6*/
	SO_SALE.VDEF6,
/*自定义项7*/
	SO_SALE.VDEF7,
/*自定义项8*/
	SO_SALE.VDEF8,
/*自定义项9*/
	SO_SALE.VDEF9,
/*修订理由*/
	SO_SALE.VEDITREASON,
/*备注*/
	SO_SALE.VNOTE,
/*单据号*/
	SO_SALE.VRECEIPTCODE,
/*收货地址*/
	SO_SALE.VRECEIVEADDRESS,
/*公司ID*/
	SO_SALE.PK_CORP,
/*核算单位编码*/
	BD_CORP.UNITCODE,
/*核算单位名称*/
	BD_CORP.UNITNAME,
/*客户ID*/
	SO_SALE.CCUSTOMERID,
/*客商编码*/
	BD_CUBASDOC.CUSTCODE,
/*客商名称*/
	BD_CUBASDOC.CUSTNAME,
/*制单人*/
	SO_SALE.COPERATORID,
/*制单人编码*/
	SM_USER.USER_CODE,
/*制单人名称*/
	SM_USER.USER_NAME,
/*审批人*/
	SO_SALE.CAPPROVEID,
/*审核人编码*/
	SM_USER2.USER_CODE USER_CODE2,
/*审核人名称*/
	SM_USER2.USER_NAME USER_NAME2,
/*部门ID*/
	SO_SALE.CDEPTID,
/*部门编码*/
	BD_DEPTDOC.DEPTCODE,
/*部门名称*/
	BD_DEPTDOC.DEPTNAME,
/*业务员ID*/
	SO_SALE.CEMPLOYEEID,
/*人员编码*/
	BD_PSNDOC.PSNCODE,
/*人员名称*/
	BD_PSNDOC.PSNNAME,
/*时间戳*/
	SO_SALE.TS
	
FROM
	SO_SALE SO_SALE
	LEFT JOIN BD_CORP BD_CORP ON SO_SALE.PK_CORP = BD_CORP.PK_CORP
	LEFT JOIN BD_CUMANDOC BD_CUMANDOC ON SO_SALE.CCUSTOMERID = BD_CUMANDOC.PK_CUMANDOC
	LEFT JOIN BD_CUBASDOC BD_CUBASDOC ON BD_CUMANDOC.PK_CUBASDOC = BD_CUBASDOC.PK_CUBASDOC
	LEFT JOIN SM_USER SM_USER ON SO_SALE.COPERATORID = SM_USER.CUSERID
	LEFT JOIN SM_USER SM_USER2 ON SO_SALE.CAPPROVEID = SM_USER2.CUSERID
	LEFT JOIN BD_DEPTDOC BD_DEPTDOC ON SO_SALE.CDEPTID = BD_DEPTDOC.PK_DEPTDOC
	LEFT JOIN BD_PSNDOC BD_PSNDOC ON SO_SALE.CEMPLOYEEID = BD_PSNDOC.PK_PSNDOC 

```

#### 订单明细

```sql
SELECT
/*是否捆绑存货*/
	SO_SALEORDER_B.BBINDFLAG,
/*是否直运*/
	SO_SALEORDER_B.BDERICTTRANS,
/*缺货标志*/
	SO_SALEORDER_B.BOOSFLAG,
/*是否参与返利*/
	SO_SALEORDER_B.BRETURNPROFIT,
/*是否参与价保*/
	SO_SALEORDER_B.BSAFEPRICE,
/*补货标志*/
	SO_SALEORDER_B.BSUPPLYFLAG,
/*建议发货库存组织*/
	SO_SALEORDER_B.CADVISECALBODYID,
/*批次*/
	SO_SALEORDER_B.CBATCHID,
/*附表仓库*/
	SO_SALEORDER_B.CBODYWAREHOUSEID,
/*配置单ID*/
	SO_SALEORDER_B.CBOMORDERID,
/*渠道类型ID*/
	SO_SALEORDER_B.CCHANTYPEID,
/*发货公司*/
	SO_SALEORDER_B.CCONSIGNCORPID,
/*原币*/
	SO_SALEORDER_B.CCURRENCYTYPEID,
/*工厂ID*/
	SO_SALEORDER_B.CFACTORYID,
/*库存冻结ID*/
	SO_SALEORDER_B.CFREEZEID,
/*存货ID*/
	SO_SALEORDER_B.CINVENTORYID,
/*存货ID1*/
	SO_SALEORDER_B.CINVENTORYID1,
/*主存货行号*/
	SO_SALEORDER_B.CLARGESSROWNO,
/*制单人*/
	SO_SALEORDER_B.COPERATORID,
/*销售订单附表ID*/
	SO_SALEORDER_B.CORDER_BID,
/*辅单位*/
	SO_SALEORDER_B.CPACKUNITID,
/*价格计算过程*/
	SO_SALEORDER_B.CPRICECALPROC,
/*价格项目ID*/
	SO_SALEORDER_B.CPRICEITEMID,
/*价目表*/
	SO_SALEORDER_B.CPRICEITEMTABLE,
/*价格政策ID*/
	SO_SALEORDER_B.CPRICEPOLICYID,
/*产品线*/
	SO_SALEORDER_B.CPROLINEID,
/*供应商*/
	SO_SALEORDER_B.CPROVIDERID,
/*报价计量单位*/
	SO_SALEORDER_B.CQUOTEUNITID,
/*收货地点*/
	SO_SALEORDER_B.CRECADDRNODE,
/*收货库存组织*/
	SO_SALEORDER_B.CRECCALBODYID,
/*收货地区*/
	SO_SALEORDER_B.CRECEIPTAREAID,
/*收货单位*/
	SO_SALEORDER_B.CRECEIPTCORPID,
/*收货仓库*/
	SO_SALEORDER_B.CRECWAREID,
/*来源单据附表ID*/
	SO_SALEORDER_B.CSOURCEBILLBODYID,
/*来源单据主表ID*/
	SO_SALEORDER_B.CSOURCEBILLID,
/*合同行ID*/
	SO_SALEORDER_B.CT_MANAGEBID,
/*合同ID*/
	SO_SALEORDER_B.CT_MANAGEID,
/*发货日期*/
	SO_SALEORDER_B.DCONSIGNDATE,
/*交货日期*/
	SO_SALEORDER_B.DDELIVERDATE,
/*批次状态*/
	SO_SALEORDER_B.FBATCHSTATUS,
/*行备注*/
	SO_SALEORDER_B.FROWNOTE,
/*行状态*/
	SO_SALEORDER_B.FROWSTATUS,
/*已参与返利辅数量*/
	SO_SALEORDER_B.NASTRETPROFNUM,
/*已参与价保辅数量*/
	SO_SALEORDER_B.NASTTALDCNUM,
/*本币折扣额*/
	SO_SALEORDER_B.NDISCOUNTMNY,
/*整单折扣*/
	SO_SALEORDER_B.NDISCOUNTRATE,
/*折本汇率*/
	SO_SALEORDER_B.NEXCHANGEOTOBRATE,
/*单品折扣率*/
	SO_SALEORDER_B.NITEMDISCOUNTRATE,
/*本币无税金额*/
	SO_SALEORDER_B.NMNY,
/*本币无税净价*/
	SO_SALEORDER_B.NNETPRICE,
/*数量*/
	SO_SALEORDER_B.NNUMBER,
/*报价单位无税净价*/
	SO_SALEORDER_B.NORGQTNETPRC,
/*报价单位无税单价*/
	SO_SALEORDER_B.NORGQTPRC,
/*报价单位含税净价*/
	SO_SALEORDER_B.NORGQTTAXNETPRC,
/*报价单位含税单价*/
	SO_SALEORDER_B.NORGQTTAXPRC,
/*原币折扣额*/
	SO_SALEORDER_B.NORIGINALCURDISCOUNTMNY,
/*原币无税金额*/
	SO_SALEORDER_B.NORIGINALCURMNY,
/*原币无税净价*/
	SO_SALEORDER_B.NORIGINALCURNETPRICE,
/*原币无税单价*/
	SO_SALEORDER_B.NORIGINALCURPRICE,
/*原币价税合计*/
	SO_SALEORDER_B.NORIGINALCURSUMMNY,
/*原币税额*/
	SO_SALEORDER_B.NORIGINALCURTAXMNY,
/*原币含税净价*/
	SO_SALEORDER_B.NORIGINALCURTAXNETPRICE,
/*原币含税单价*/
	SO_SALEORDER_B.NORIGINALCURTAXPRICE,
/*辅数量*/
	SO_SALEORDER_B.NPACKNUMBER,
/*本币无税单价*/
	SO_SALEORDER_B.NPRICE,
/*报价单位本币无税净价*/
	SO_SALEORDER_B.NQTNETPRC,
/*询价原币无税净价*/
	SO_SALEORDER_B.NQTORGNETPRC,
/*询价原币无税单价*/
	SO_SALEORDER_B.NQTORGPRC,
/*询价原币含税净价*/
	SO_SALEORDER_B.NQTORGTAXNETPRC,
/*询价原币含税单价*/
	SO_SALEORDER_B.NQTORGTAXPRC,
/*报价单位本币无税单价*/
	SO_SALEORDER_B.NQTPRC,
/*报价单位本币含税净价*/
	SO_SALEORDER_B.NQTTAXNETPRC,
/*报价单位本币含税单价*/
	SO_SALEORDER_B.NQTTAXPRC,
/*报价单位数量*/
	SO_SALEORDER_B.NQUOTEUNITNUM,
/*报价计量单位换算率*/
	SO_SALEORDER_B.NQUOTEUNITRATE,
/*返利金额*/
	SO_SALEORDER_B.NRETPROFMNY,
/*已参与返利主数量*/
	SO_SALEORDER_B.NRETPROFNUM,
/*出口退税率*/
	SO_SALEORDER_B.NRETURNTAXRATE,
/*本币价税合计*/
	SO_SALEORDER_B.NSUMMNY,
/*价保金额*/
	SO_SALEORDER_B.NTALDCMNY,
/*已参与价保主数量*/
	SO_SALEORDER_B.NTALDCNUM,
/*本币税额*/
	SO_SALEORDER_B.NTAXMNY,
/*本币含税净价*/
	SO_SALEORDER_B.NTAXNETPRICE,
/*本币含税单价*/
	SO_SALEORDER_B.NTAXPRICE,
/*税率*/
	SO_SALEORDER_B.NTAXRATE,
/*公司主键*/
	SO_SALEORDER_B.PK_CORP,
/*发货时间*/
	SO_SALEORDER_B.TCONSIGNTIME,
/*到货时间*/
	SO_SALEORDER_B.TDELIVERTIME,
/*修订理由*/
	SO_SALEORDER_B.VEDITREASON,
/*收货地址*/
	SO_SALEORDER_B.VRECEIVEADDRESS,
/*是否货源安排完毕*/
	SO_SALEEXECUTE.BARRANGEDFLAG,
/*是否出库关闭*/
	SO_SALEEXECUTE.BIFINVENTORYFINISH,
/*是否开票关闭*/
	SO_SALEEXECUTE.BIFINVOICEFINISH,
/*是否收款关闭*/
	SO_SALEEXECUTE.BIFPAYFINISH,
/*是否发货关闭*/
	SO_SALEEXECUTE.BIFRECEIVEFINISH,
/*是否运输关闭*/
	SO_SALEEXECUTE.BIFTRANSFINISH,
/*是否结算关闭*/
	SO_SALEEXECUTE.BSQUAREENDFLAG,
/*最后货源安排人*/
	SO_SALEEXECUTE.CARRANGEPERSONID,
/*项目3*/
	SO_SALEEXECUTE.CPROJECTID3,
/*项目阶段*/
	SO_SALEEXECUTE.CPROJECTPHASEID,
/*明细附表ID*/
	SO_SALEEXECUTE.CSALE_BID,
/*最近一次发货日期*/
	SO_SALEEXECUTE.DLASTCONSIGDATE,
/*最近一次开票日期*/
	SO_SALEEXECUTE.DLASTINVOICEDT,
/*最近一次出库日期*/
	SO_SALEEXECUTE.DLASTOUTDATE,
/*最近一次收款日期*/
	SO_SALEEXECUTE.DLASTPAYDATE,
/*最近一次运输日期*/
	SO_SALEEXECUTE.DLASTTRANSDATE,
/*累计安排生产订单数量*/
	SO_SALEEXECUTE.NARRANGEMONUM,
/*累计安排请购单数量*/
	SO_SALEEXECUTE.NARRANGEPOAPPLYNUM,
/*累计安排采购订单数量*/
	SO_SALEEXECUTE.NARRANGEPOORDERNUM,
/*累计安排委外订单数量*/
	SO_SALEEXECUTE.NARRANGESCORNUM,
/*累计安排调拨订单数量*/
	SO_SALEEXECUTE.NARRANGETOORNUM,
/*累计合并开票金额*/
	SO_SALEEXECUTE.NARSUBINVMNY,
/*累计暂估应收金额*/
	SO_SALEEXECUTE.NESTBALANCEMNY,
/*累计暂估应收数量*/
	SO_SALEEXECUTE.NESTBALANCENUMBER,
/*回写上游本币价税合计*/
	SO_SALEEXECUTE.NFEEDBACKMNY,
/*回写上游数量*/
	SO_SALEEXECUTE.NFEEDBACKNUM,
/*累计安排调拨申请数量*/
	SO_SALEEXECUTE.NORRANGETOAPPLYNUM,
/*累计出库对冲数量*/
	SO_SALEEXECUTE.NRUSHNUM,
/*累计确认应收金额*/
	SO_SALEEXECUTE.NTALBALANCEMNY,
/*累计运输数量*/
	SO_SALEEXECUTE.NTALTRANSNUM,
/*累计确认应收数量*/
	SO_SALEEXECUTE.NTOTALBALANCENUMBER,
/*累计成本金额*/
	SO_SALEEXECUTE.NTOTALCOSTMNY,
/*累计出库数量*/
	SO_SALEEXECUTE.NTOTALINVENTORYNUMBER,
/*累计开票金额*/
	SO_SALEEXECUTE.NTOTALINVOICEMNY,
/*累计开票数量*/
	SO_SALEEXECUTE.NTOTALINVOICENUMBER,
/*累计收款金额*/
	SO_SALEEXECUTE.NTOTALPAYMNY,
/*累计发货数量*/
	SO_SALEEXECUTE.NTOTALRECEIVENUMBER,
/*累计退货数量*/
	SO_SALEEXECUTE.NTOTALRETURNNUMBER,
/*累计应发未出库数量*/
	SO_SALEEXECUTE.NTOTALSHOULDOUTNUM,
/*累计签收数量*/
	SO_SALEEXECUTE.NTOTALSIGNNUMBER,
/*累计成本结算数量*/
	SO_SALEEXECUTE.NTOTLBALCOSTNUM,
/*累计途损主数量*/
	SO_SALEEXECUTE.NTRANSLOSSNUM,
/*自定义项主键1*/
	SO_SALEEXECUTE.PK_DEFDOC1,
/*自定义项主键10*/
	SO_SALEEXECUTE.PK_DEFDOC10,
/*自定义项主键11*/
	SO_SALEEXECUTE.PK_DEFDOC11,
/*自定义项主键12*/
	SO_SALEEXECUTE.PK_DEFDOC12,
/*自定义项主键13*/
	SO_SALEEXECUTE.PK_DEFDOC13,
/*自定义项主键14*/
	SO_SALEEXECUTE.PK_DEFDOC14,
/*自定义项主键15*/
	SO_SALEEXECUTE.PK_DEFDOC15,
/*自定义项主键16*/
	SO_SALEEXECUTE.PK_DEFDOC16,
/*自定义项主键17*/
	SO_SALEEXECUTE.PK_DEFDOC17,
/*自定义项主键18*/
	SO_SALEEXECUTE.PK_DEFDOC18,
/*自定义项主键2*/
	SO_SALEEXECUTE.PK_DEFDOC2,
/*自定义项主键3*/
	SO_SALEEXECUTE.PK_DEFDOC3,
/*自定义项主键4*/
	SO_SALEEXECUTE.PK_DEFDOC4,
/*自定义项主键5*/
	SO_SALEEXECUTE.PK_DEFDOC5,
/*自定义项主键6*/
	SO_SALEEXECUTE.PK_DEFDOC6,
/*自定义项主键7*/
	SO_SALEEXECUTE.PK_DEFDOC7,
/*自定义项主键8*/
	SO_SALEEXECUTE.PK_DEFDOC8,
/*自定义项主键9*/
	SO_SALEEXECUTE.PK_DEFDOC9,
/*最后货源安排时间*/
	SO_SALEEXECUTE.TLASTARRANGETIME,
/*自定义项16*/
	SO_SALEEXECUTE.VDEF16,
/*自定义项17*/
	SO_SALEEXECUTE.VDEF17,
/*自定义项18*/
	SO_SALEEXECUTE.VDEF18,
/*自定义项2*/
	SO_SALEEXECUTE.VDEF2,
/*自定义项3*/
	SO_SALEEXECUTE.VDEF3,
/*自定义项4*/
	SO_SALEEXECUTE.VDEF4,
/*自定义项5*/
	SO_SALEEXECUTE.VDEF5,
/*自定义项6*/
	SO_SALEEXECUTE.VDEF6,
/*自定义项7*/
	SO_SALEEXECUTE.VDEF7,
/*单据类型*/
	SO_SALEEXECUTE.CRECEIPTTYPE,
/*销售主表ID*/
	SO_SALEORDER_B.CSALEID,
/*删除标志*/
	SO_SALEORDER_B.DR,
/*行号*/
	SO_SALEORDER_B.CROWNO,
/*存货档案主键*/
	SO_SALEORDER_B.CINVBASDOCID,
/*存货编码*/
	BD_INVBASDOC.INVCODE,
/*存货名称*/
	BD_INVBASDOC.INVNAME,
/*存货规格*/
	BD_INVBASDOC.INVSPEC,
/*存货型号*/
	BD_INVBASDOC.INVTYPE,
/*主计量单位*/
	SO_SALEORDER_B.CUNITID,
/*计量单位编码*/
	BD_MEASDOC.SHORTNAME,
/*计量单位名称*/
	BD_MEASDOC.MEASNAME,
/*是否赠品-是否附加备件*/
	SO_SALEORDER_B.BLARGESSFLAG,
/*项目ID-出库实物类型*/
	SO_SALEEXECUTE.CPROJECTID,
/*项目编码-出库实物类型*/
	BD_JOBBASFIL.JOBCODE,
/*项目名称-出库实物类型*/
	BD_JOBBASFIL.JOBNAME,
/*自定义项1-报价*/
	SO_SALEEXECUTE.VDEF1,
/*自定义项9-服务开始时间*/
	SO_SALEEXECUTE.VDEF9,
/*自定义项10-服务结束时间*/
	SO_SALEEXECUTE.VDEF10,
/*自定义项8-采购开始时间*/
	SO_SALEEXECUTE.VDEF8,
/*自定义项11-标准价*/
	SO_SALEEXECUTE.VDEF11,
/*自定义项12-产品注册证号*/
	SO_SALEEXECUTE.VDEF12,
/*自定义项13-生产企业号*/
	SO_SALEEXECUTE.VDEF13,
/*自定义项14-生产企业*/
	SO_SALEEXECUTE.VDEF14,
/*自定义项15-备注*/
	SO_SALEEXECUTE.VDEF15,
/*自定义项主键19-维修单号*/
	SO_SALEEXECUTE.PK_DEFDOC19,
/*自定义项19-维修单号*/
	SO_SALEEXECUTE.VDEF19,
/*自定义项主键20-是否库存件出库*/
	SO_SALEEXECUTE.PK_DEFDOC20,
/*自定义项20-是否库存件出库*/
	SO_SALEEXECUTE.VDEF20,
/*时间戳*/
	SO_SALEORDER_B.TS 
FROM
	SO_SALEORDER_B SO_SALEORDER_B
	LEFT JOIN SO_SALEEXECUTE SO_SALEEXECUTE ON SO_SALEORDER_B.CORDER_BID = SO_SALEEXECUTE.CSALE_BID
	LEFT JOIN BD_INVBASDOC BD_INVBASDOC ON SO_SALEORDER_B.CINVBASDOCID = BD_INVBASDOC.PK_INVBASDOC
	LEFT JOIN BD_MEASDOC BD_MEASDOC ON SO_SALEORDER_B.CUNITID = BD_MEASDOC.PK_MEASDOC
	LEFT JOIN BD_JOBMNGFIL BD_JOBMNGFIL ON SO_SALEEXECUTE.CPROJECTID = BD_JOBMNGFIL.PK_JOBMNGFIL
	LEFT JOIN BD_JOBBASFIL BD_JOBBASFIL ON BD_JOBBASFIL.PK_JOBBASFIL = BD_JOBMNGFIL.PK_JOBBASFIL ;
```

### 接口报文

#### 创建销售订单

```xml
<?xml version="1.0" encoding='UTF-8'?>
<ufinterface billtype="30" filename="" isexchange="Y" proc="add" receiver="${核算单位NC编码}" replace="Y" roottag="" sender="30" subbilltype="">
    <so_order id="${销售订单号}">
        <so_order_head>
            <!--pk_corp,核算单位，不能为空,最大长度为4,类型为:String-->
            <pk_corp>${核算单位NC编码}</pk_corp>
            <!--vreceiptcode,单据号，最大长度为30,类型为:String-->
            <vreceiptcode>${销售订单号}</vreceiptcode>
            <!--creceipttype,单据类型，不能为空,最大长度为2,类型为:String-->
            <creceipttype>30</creceipttype>
            <!--cbiztype,不能为空,最大长度为20,类型为:String-->
            <cbiztype>XS01</cbiztype>
            <!--editionnum,修订版本号,最大长度为120,类型为:String-->
            <editionnum></editionnum>
            <!--vaccountyear,会计年度,最大长度为4,类型为:String-->
            <vaccountyear>${创建日期年度}</vaccountyear>
            <!--binitflag,期初标志,最大长度为1,类型为:UFBoolean-->
            <binitflag>N</binitflag>
            <!--dbilldate,不能为空,最大长度为10,类型为:UFDate-->
            <dbilldate>${单据创建日期}</dbilldate>
            <!--ccustomerid,不能为空,最大长度为20,类型为:String-->
            <ccustomerid>${客户名称对应的NC编码}</ccustomerid>
            <!--cdeptid,不能为空,最大长度为20,类型为:String-->
            <cdeptid>${部门名称}</cdeptid>
            <!--cemployeeid,最大长度为20,类型为:String-->
            <cemployeeid>${业务员人员编码}</cemployeeid>
            <!--coperatorid,不能为空,最大长度为20,类型为:String-->
            <coperatorid>${制单人编码}</coperatorid>
            <!--ctermprotocolid,收款协议,最大长度为20,类型为:String-->
            <ctermprotocolid></ctermprotocolid>
            <!--csalecorpid,销售组织,不能为空,最大长度为20,类型为:String-->
            <csalecorpid>${核算单位NC编码}</csalecorpid>
            <!--ccalbodyid,库存组织,不能为空,最大长度为20,类型为:String-->
			<!--获取库存组织编码，根据核算单位中来源NC的ID，查询库存组织的BODYCODE
			SELECT
				BODYCODE,
				BODYNAME
			FROM
				BD_CALBODY
			WHERE
				PK_CORP = '1076';
			-->
            <ccalbodyid>${核算单位对应库存组织编码BODYCODE}</ccalbodyid>
            <!--creceiptcustomerid,收货单位,不能为空,最大长度为20,类型为:String-->
            <creceiptcustomerid>${客户名称对应的NC编码}</creceiptcustomerid>
            <!--vreceiveaddress,收货地址,最大长度为254,类型为:String-->
            <vreceiveaddress>${取来源销售合同中的交货地点字段值}</vreceiveaddress>
            <!--creceiptareaid,收货地区,最大长度为20,类型为:String-->
            <creceiptareaid></creceiptareaid>
            <!--creceiptcorpid,开票单位,不能为空,最大长度为20,类型为:String-->
            <creceiptcorpid>${客户名称对应的NC编码}</creceiptcorpid>
            <!--ccustbankid,开户银行,最大长度为20,类型为:String-->
            <ccustbankid></ccustbankid>
            <!--ctransmodeid,运输方式,最大长度为20,类型为:String-->
            <ctransmodeid></ctransmodeid>
            <!--ndiscountrate,整单折扣,不能为空,最大长度为20,类型为:UFDouble-->
            <ndiscountrate>0.00000000</ndiscountrate>
            <!--cwarehouseid,仓库,最大长度为20,类型为:String-->
            <cwarehouseid></cwarehouseid>
            <!--veditreason,修订理由,最大长度为120,类型为:String-->
            <veditreason></veditreason>
            <!--bfreecustflag,是否散户,最大长度为1,类型为:UFBoolean-->
            <bfreecustflag>N</bfreecustflag>
            <!--cfreecustid,散户ID,最大长度为20,类型为:String-->
            <cfreecustid></cfreecustid>
            <!--ibalanceflag,结算标志,最大长度为8,类型为:Integer-->
            <ibalanceflag>0</ibalanceflag>
            <!--nsubscription,订金,最大长度为20,类型为:UFDouble-->
            <nsubscription>0.00000000</nsubscription>
            <!--nevaluatecarriage,预估运费,最大长度为20,类型为:UFDouble-->
            <nevaluatecarriage>0.00000000</nevaluatecarriage>
            <!--dmakedate,制单日期,不能为空,最大长度为10,类型为:UFDate-->
            <dmakedate>${当前日期,2022-12-31}</dmakedate>
            <!--capproveid,审批人,最大长度为20,类型为:String-->
            <capproveid>${该核算单位订单审核人配置中的人员编码}</capproveid>
            <!--dapprovedate,审批日期,最大长度为10,类型为:UFDate-->
            <dapprovedate>${当前日期,2022-12-31}</dapprovedate>
            <!--fstatus,状态,不能为空,最大长度为8,类型为:Integer-->
            <fstatus>${1,自由 2,已审核，若订单审核人配置生效则为2，否则1}</fstatus>
            <!--vnote,备注,最大长度为120,类型为:String-->
            <vnote>${表头备注}</vnote>
            <!--vdef1,产品线，最大长度为20,类型为:String-->
            <vdef1>${取来源销售合同产品线字段}</vdef1>
            <!--vdef2,省内分区，最大长度为20,类型为:String-->
            <vdef2>${取来源销售合同省内分区字段}</vdef2>
            <!--vdef3,二级业务单元，最大长度为20,类型为:String-->
            <vdef3>${取来源销售合同二级业务单元字段}</vdef3>
            <!--vdef4,省市，最大长度为20,类型为:String-->
            <vdef4>${取来源销售合同业绩归属省市字段}</vdef4>
            <!--vdef5,客商属性，最大长度为20,类型为:String-->
            <vdef5>${取来源销售合同客商属性字段}</vdef5>
            <!--vdef6,最大长度为20,类型为:String-->
            <vdef6></vdef6>
            <!--vdef7,最大长度为20,类型为:String-->
            <vdef7></vdef7>
            <!--vdef8,最大长度为20,类型为:String-->
            <vdef8></vdef8>
            <!--vdef9,最大长度为20,类型为:String-->
            <vdef9></vdef9>
            <!--vdef10,最大长度为20,类型为:String-->
            <vdef10></vdef10>
            <!--vdef11,最大长度为20,类型为:String-->
            <vdef11></vdef11>
            <!--vdef12,最大长度为20,类型为:String-->
            <vdef12></vdef12>
            <!--vdef13,最大长度为20,类型为:String-->
            <vdef13></vdef13>
            <!--vdef14,最大长度为20,类型为:String-->
            <vdef14></vdef14>
            <!--vdef15,销售订单类型，最大长度为20,类型为:String-->
            <vdef15>${取订单销售订单类型字段值}</vdef15>
            <!--vdef16,最大长度为20,类型为:String-->
            <vdef16></vdef16>
            <!--vdef17,业绩类型，最大长度为20,类型为:String-->
            <vdef17>${取来源销售合同业绩类型字段}</vdef17>
            <!--vdef18,最大长度为20,类型为:String-->
            <vdef18>N</vdef18>
            <!--vdef19,最终用户，最大长度为20,类型为:String-->
            <vdef19>${取来源销售合同最终用户字段}</vdef19>
            <!--vdef20,最大长度为20,类型为:String-->
            <vdef20></vdef20>
            <!--pk_defdoc1,最大长度为20,类型为:String-->
            <pk_defdoc1>${取来源销售合同产品线字段ID}</pk_defdoc1>
            <!--pk_defdoc2,最大长度为20,类型为:String-->
            <pk_defdoc2>${取来源销售合同省内分区字段ID}</pk_defdoc2>
            <!--pk_defdoc3,最大长度为20,类型为:String-->
            <pk_defdoc3>${取来源销售合同二级业务单元字段ID}</pk_defdoc3>
            <!--pk_defdoc4,最大长度为20,类型为:String-->
            <pk_defdoc4>${取来源销售合同业绩归属省市字段ID}</pk_defdoc4>
            <!--pk_defdoc5,最大长度为20,类型为:String-->
            <pk_defdoc5>${取来源销售合同客商属性字段ID}</pk_defdoc5>
            <!--pk_defdoc6,最大长度为20,类型为:String-->
            <pk_defdoc6></pk_defdoc6>
            <!--pk_defdoc7,最大长度为20,类型为:String-->
            <pk_defdoc7></pk_defdoc7>
            <!--pk_defdoc8,最大长度为20,类型为:String-->
            <pk_defdoc8></pk_defdoc8>
            <!--pk_defdoc9,最大长度为20,类型为:String-->
            <pk_defdoc9></pk_defdoc9>
            <!--pk_defdoc10,最大长度为20,类型为:String-->
            <pk_defdoc10></pk_defdoc10>
            <!--pk_defdoc11,最大长度为20,类型为:String-->
            <pk_defdoc11></pk_defdoc11>
            <!--pk_defdoc12,最大长度为20,类型为:String-->
            <pk_defdoc12></pk_defdoc12>
            <!--pk_defdoc13,最大长度为20,类型为:String-->
            <pk_defdoc13></pk_defdoc13>
            <!--pk_defdoc14,最大长度为20,类型为:String-->
            <pk_defdoc14></pk_defdoc14>
            <!--pk_defdoc15,最大长度为20,类型为:String-->
            <pk_defdoc15>${取订单销售订单类型字段ID}</pk_defdoc15>
            <!--pk_defdoc16,最大长度为20,类型为:String-->
            <pk_defdoc16></pk_defdoc16>
            <!--pk_defdoc17,最大长度为20,类型为:String-->
            <pk_defdoc17>${取来源销售合同业绩类型字段ID}</pk_defdoc17>
            <!--pk_defdoc18,最大长度为20,类型为:String-->
            <pk_defdoc18></pk_defdoc18>
            <!--pk_defdoc19,最大长度为20,类型为:String-->
            <pk_defdoc19>${取来源销售合同最终用户字段ID}</pk_defdoc19>
            <!--pk_defdoc20,最大长度为20,类型为:String-->
            <pk_defdoc20></pk_defdoc20>
            <!--bretinvflag,退货标记,最大长度为1,类型为:UFBoolean-->
            <bretinvflag>N</bretinvflag>
            <!--boutendflag,出库关闭标记,最大长度为1,类型为:UFBoolean-->
            <boutendflag>N</boutendflag>
            <!--binvoicendflag,开票关闭标记,最大长度为1,类型为:UFBoolean-->
            <binvoicendflag>N</binvoicendflag>
            <!--breceiptendflag,发货关闭标记,最大长度为1,类型为:UFBoolean-->
            <breceiptendflag>N</breceiptendflag>
            <!--bpayendflag,付款关闭标记,最大长度为1,类型为:UFBoolean-->
            <bpayendflag>N</bpayendflag>
        </so_order_head>
        <so_order_body>
            <entry>
                <!--pk_corp,公司,不能为空,最大长度为4,类型为:String-->
                <pk_corp>${核算单位NC编码}</pk_corp>
                <!--creceipttype,来源单据类型,最大长度为2,类型为:String-->
                <creceipttype>Z4</creceipttype>
                <!--csourcebillid,来源单据主表ID,最大长度为20,类型为:String-->
                <csourcebillid>${取来源合同主表NCID}</csourcebillid>
                <!--csourcebillbodyid,来源单据附表ID,最大长度为20,类型为:String-->
                <csourcebillbodyid>${取来源合同子表NCID}</csourcebillbodyid>
                <!--cinvbasdocid,存货档案主键,最大长度为20,类型为:String-->
                <cinvbasdocid></cinvbasdocid>
                <!--cinventoryid,存货ID1,不能为空,最大长度为20,类型为:String-->
                <cinventoryid>${商品编码}</cinventoryid>
                <!--cunitid,主计量单位,不能为空,最大长度为20,类型为:String-->
                <cunitid>${商品单位编码}</cunitid>
                <!--cpackunitid,辅单位,最大长度为20,类型为:String-->
                <cpackunitid></cpackunitid>
                <!--cbatchid,批次,最大长度为30,类型为:String-->
                <cbatchid></cbatchid>
                <!--nnumber,数量,不能为空,最大长度为20,类型为:UFDouble-->
                <nnumber>${商品数量}</nnumber>
                <!--npacknumber,辅数量,最大长度为20,类型为:UFDouble-->
                <npacknumber>${商品数量}</npacknumber>
                <!--cconsigncorpid,发货公司,最大长度为4,类型为:String-->
                <cconsigncorpid>${核算单位NC编码}</cconsigncorpid>
                <!--cadvisecalbodyid,建议发货库存组织,不能为空,最大长度为20,类型为:String-->
                <cadvisecalbodyid>${核算单位对应库存组织编码BODYCODE与表头规则一致}</cadvisecalbodyid>
                <!--cbodywarehouseid,附表仓库,最大长度为20,类型为:String-->
                <cbodywarehouseid>${明细行对应仓库编码}</cbodywarehouseid>
                <!--creccalbodyid,收货库存组织,最大长度为20,类型为:String-->
                <creccalbodyid></creccalbodyid>
                <!--crecwarehouseid,收货仓库,最大长度为20,类型为:String-->
                <crecwarehouseid></crecwarehouseid>
                <!--dconsigndate,发货日期,不能为空,最大长度为10,类型为:UFDate-->
                <dconsigndate>${当前日期,2022-12-31}</dconsigndate>
                <!--ddeliverdate,交货日期,不能为空,最大长度为10,类型为:UFDate-->
                <ddeliverdate>${当前日期,2022-12-31}</ddeliverdate>
                <!--blargessflag,是否赠品,最大长度为1,类型为:UFBoolean-->
                <blargessflag>${Y\N,根据明细中是否附加备件的值赋值}</blargessflag>
                <!--ceditsaleid,最大长度为20,类型为:String-->
                <ceditsaleid></ceditsaleid>
                <!--beditflag,最大长度为1,类型为:UFBoolean-->
                <beditflag>N</beditflag>
                <!--veditreason,修订理由,最大长度为120,类型为:String-->
                <veditreason></veditreason>
                <!--ccurrencytypeid,原币,不能为空,最大长度为20,类型为:String-->
                <ccurrencytypeid>CNY</ccurrencytypeid>
                <!--nitemdiscountrate,单品折扣率,不能为空,最大长度为20,类型为:UFDouble-->
                <nitemdiscountrate>0.00000000</nitemdiscountrate>
                <!--ndiscountrate,整单折扣,不能为空,最大长度为20,类型为:UFDouble-->
                <ndiscountrate>0.00000000</ndiscountrate>
                <!--nexchangeotobrate,折本汇率,不能为空,最大长度为20,类型为:UFDouble-->
                <nexchangeotobrate>0.00000000</nexchangeotobrate>
                <!--nexchangeotoarate,最大长度为20,类型为:UFDouble-->
                <nexchangeotoarate>0.00000000</nexchangeotoarate>
                <!--ntaxrate,税率,不能为空,最大长度为20,类型为:UFDouble-->
                <ntaxrate>${取单据行税率，整数}</ntaxrate>
                <!--noriginalcurprice,原币无税单价,不能为空,最大长度为20,类型为:UFDouble-->
                <noriginalcurprice>${取单据行无税单价}</noriginalcurprice>
                <!--noriginalcurtaxprice,原币含税单价，不能为空,最大长度为20,类型为:UFDouble-->
                <noriginalcurtaxprice>${取单据行含税单价}</noriginalcurtaxprice>
                <!--noriginalcurnetprice,原币无税净价，不能为空,最大长度为20,类型为:UFDouble-->
                <noriginalcurnetprice>${取单据行无税单价}</noriginalcurnetprice>
                <!--noriginalcurtaxnetprice,原币含税净价，不能为空,最大长度为20,类型为:UFDouble-->
                <noriginalcurtaxnetprice>${取单据行含税单价}</noriginalcurtaxnetprice>
                <!--noriginalcurtaxmny,原币税额，不能为空,最大长度为20,类型为:UFDouble-->
                <noriginalcurtaxmny>${取单据行税额}</noriginalcurtaxmny>
                <!--noriginalcurmny,原币无税金额，不能为空,最大长度为20,类型为:UFDouble-->
                <noriginalcurmny>${取单据行无税金额}</noriginalcurmny>
                <!--noriginalcursummny,原币价税合计，不能为空,最大长度为20,类型为:UFDouble-->
                <noriginalcursummny>${取单据行价税合计}</noriginalcursummny>
                <!--noriginalcurdiscountmny,原币折扣额，不能为空,最大长度为20,类型为:UFDouble-->
                <noriginalcurdiscountmny>0.00000000</noriginalcurdiscountmny>
                <!--nprice,不能为空,本币无税单价，最大长度为20,类型为:UFDouble-->
                <nprice>${取单据行无税单价}</nprice>
                <!--ntaxprice,本币含税单价，不能为空,最大长度为20,类型为:UFDouble-->
                <ntaxprice>${取单据行含税单价}</ntaxprice>
                <!--nnetprice,本币无税净价，不能为空,最大长度为20,类型为:UFDouble-->
                <nnetprice>${取单据行无税单价}</nnetprice>
                <!--ntaxnetprice,本币含税净价，不能为空,最大长度为20,类型为:UFDouble-->
                <ntaxnetprice>${取单据行含税单价}</ntaxnetprice>
                <!--ntaxmny,本币税额，不能为空,最大长度为20,类型为:UFDouble-->
                <ntaxmny>${取单据行税额}</ntaxmny>
                <!--nmny,本币无税金额，不能为空,最大长度为20,类型为:UFDouble-->
                <nmny>${取单据行无税金额}</nmny>
                <!--nsummny,本币价税合计，不能为空,最大长度为20,类型为:UFDouble-->
                <nsummny>${取单据行价税合计}</nsummny>
                <!--ndiscountmny,本币折扣额，不能为空,最大长度为20,类型为:UFDouble-->
                <ndiscountmny>0.00000000</ndiscountmny>
                <!--coperatorid,制单人，不能为空,最大长度为20,类型为:String-->
                <coperatorid>${制单人编码}</coperatorid>
                <!--frowstatus,行状态，不能为空,最大长度为8,类型为:Integer-->
                <frowstatus>0</frowstatus>
                <!--frownote,行备注，最大长度为120,类型为:String-->
                <frownote>${取明细行备注}</frownote>
                <!--fbatchstatus,批次状态，最大长度为8,类型为:Integer-->
                <fbatchstatus>0</fbatchstatus>
                <!--ct_manageid,合同ID，最大长度为20,类型为:String-->
                <ct_manageid>${取来源合同主表NCID}</ct_manageid>
                <!--cfactoryid,工厂ID，最大长度为20,类型为:String-->
                <cfactoryid></cfactoryid>
                <!--cfreezeid,库存冻结ID，最大长度为20,类型为:String-->
                <cfreezeid></cfreezeid>
                <!--cbomorderid,配置单ID，最大长度为20,类型为:String-->
                <cbomorderid></cbomorderid>
                <!--boosflag,缺货标志，最大长度为1,类型为:UFBoolean-->
                <boosflag>N</boosflag>
                <!--bsupplyflag,补货标志，最大长度为1,类型为:UFBoolean-->
                <bsupplyflag>N</bsupplyflag>
                <!--creceiptareaid,收货地区，最大长度为20,类型为:String-->
                <creceiptareaid></creceiptareaid>
                <!--vreceiveaddress,收货地址，最大长度为254,类型为:String-->
                <vreceiveaddress>${取来源销售合同中的交货地点字段值}</vreceiveaddress>
                <!--creceiptcorpid,收货单位，不能为空,最大长度为20,类型为:String-->
                <creceiptcorpid>${客户名称对应的NC编码}</creceiptcorpid>
                <!--crowno,行号，不能为空,最大长度为20,类型为:String-->
                <crowno>${取明细行行号}</crowno>
                <!--ntotalpaymny,累计收款金额，最大长度为20,类型为:UFDouble-->
                <ntotalpaymny>0.00000000</ntotalpaymny>
                <!--ntotalreceiptnumber,最大长度为20,类型为:UFDouble-->
                <ntotalreceiptnumber>0.00000000</ntotalreceiptnumber>
                <!--ntotalinvoicenumber,累计开票数量，最大长度为20,类型为:UFDouble-->
                <ntotalinvoicenumber>0.00000000</ntotalinvoicenumber>
                <!--ntotalinvoicemny,累计开票金额，最大长度为20,类型为:UFDouble-->
                <ntotalinvoicemny>0.00000000</ntotalinvoicemny>
                <!--ntotalinventorynumber,累计出库数量，最大长度为20,类型为:UFDouble-->
                <ntotalinventorynumber>0.00000000</ntotalinventorynumber>
                <!--ntotalbalancenumber,累计确认应收数量，最大长度为20,类型为:UFDouble-->
                <ntotalbalancenumber>0.00000000</ntotalbalancenumber>
                <!--ntotalsignnumber,累计签收数量，最大长度为20,类型为:UFDouble-->
                <ntotalsignnumber>0.00000000</ntotalsignnumber>
                <!--ntotalcostmny,累计成本金额，最大长度为20,类型为:UFDouble-->
                <ntotalcostmny>0.00000000</ntotalcostmny>
                <!--bifinvoicefinish,是否开票关闭，最大长度为1,类型为:UFBoolean-->
                <bifinvoicefinish>N</bifinvoicefinish>
                <!--bifreceiptfinish,最大长度为1,类型为:UFBoolean-->
                <bifreceiptfinish>N</bifreceiptfinish>
                <!--bifinventoryfinish,是否出库关闭，最大长度为1,类型为:UFBoolean-->
                <bifinventoryfinish>N</bifinventoryfinish>
                <!--bifpayfinish,是否收款关闭，最大长度为1,类型为:UFBoolean-->
                <bifpayfinish>N</bifpayfinish>
                <!--bifpaybalance,最大长度为1,类型为:UFBoolean-->
                <bifpaybalance>N</bifpaybalance>
                <!--bifpaysign,最大长度为1,类型为:UFBoolean-->
                <bifpaysign>N</bifpaysign>
                <!--nassistcurdiscountmny,最大长度为20,类型为:UFDouble-->
                <nassistcurdiscountmny>0.00000000</nassistcurdiscountmny>
                <!--nassistcursummny,最大长度为20,类型为:UFDouble-->
                <nassistcursummny>0.00000000</nassistcursummny>
                <!--nassistcurmny,最大长度为20,类型为:UFDouble-->
                <nassistcurmny>0.00000000</nassistcurmny>
                <!--nassistcurtaxmny,最大长度为20,类型为:UFDouble-->
                <nassistcurtaxmny>0.00000000</nassistcurtaxmny>
                <!--nassistcurtaxnetprice,最大长度为20,类型为:UFDouble-->
                <nassistcurtaxnetprice>0.00000000</nassistcurtaxnetprice>
                <!--nassistcurnetprice,最大长度为20,类型为:UFDouble-->
                <nassistcurnetprice>0.00000000</nassistcurnetprice>
                <!--nassistcurtaxprice,最大长度为20,类型为:UFDouble-->
                <nassistcurtaxprice>0.00000000</nassistcurtaxprice>
                <!--nassistcurprice,最大长度为20,类型为:UFDouble-->
                <nassistcurprice>0.00000000</nassistcurprice>
                <!--cprojectid,项目ID，最大长度为20,类型为:String-->
                <cprojectid>${取明细行出库实物类型code}</cprojectid>
                <!--cprojectphaseid,项目阶段，最大长度为20,类型为:String-->
                <cprojectphaseid></cprojectphaseid>
                <!--vdef1,最大长度为20,类型为:String-->
                <vdef1></vdef1>
                <!--vdef2,最大长度为20,类型为:String-->
                <vdef2></vdef2>
                <!--vdef3,最大长度为20,类型为:String-->
                <vdef3></vdef3>
                <!--vdef4,最大长度为20,类型为:String-->
                <vdef4></vdef4>
                <!--vdef5,最大长度为20,类型为:String-->
                <vdef5></vdef5>
                <!--vdef6,最大长度为20,类型为:String-->
                <vdef6></vdef6>
                <!--vdef7,最大长度为20,类型为:String-->
                <vdef7></vdef7>
                <!--vdef8,最大长度为20,类型为:String-->
                <vdef8></vdef8>
                <!--vdef9,服务开始时间，最大长度为20,类型为:String-->
                <vdef9>${取明细行服务开始时间}</vdef9>
                <!--vdef10,服务结束时间，最大长度为20,类型为:String-->
                <vdef10>${取明细行服务结束时间}</vdef10>
                <!--vdef11,最大长度为20,类型为:String-->
                <vdef11></vdef11>
                <!--vdef12,最大长度为20,类型为:String-->
                <vdef12></vdef12>
                <!--vdef13,最大长度为20,类型为:String-->
                <vdef13></vdef13>
                <!--vdef14,最大长度为20,类型为:String-->
                <vdef14></vdef14>
                <!--vdef15,备注，最大长度为20,类型为:String-->
                <vdef15>${取明细行备注字段}</vdef15>
                <!--vdef16,最大长度为20,类型为:String-->
                <vdef16></vdef16>
                <!--vdef17,最大长度为20,类型为:String-->
                <vdef17></vdef17>
                <!--vdef18,最大长度为20,类型为:String-->
                <vdef18></vdef18>
                <!--vdef19,维修单号，最大长度为20,类型为:String-->
                <vdef19>${取来源合同变更对应的维修单号/工单号}</vdef19>
                <!--vdef20,是否库存件出库，最大长度为20,类型为:String-->
                <vdef20>${Y/N 根据明细业务对应需求单是否为库存件赋值}</vdef20>
                <!--pk_defdoc1,最大长度为20,类型为:String-->
                <pk_defdoc1></pk_defdoc1>
                <!--pk_defdoc2,最大长度为20,类型为:String-->
                <pk_defdoc2></pk_defdoc2>
                <!--pk_defdoc3,最大长度为20,类型为:String-->
                <pk_defdoc3></pk_defdoc3>
                <!--pk_defdoc4,最大长度为20,类型为:String-->
                <pk_defdoc4></pk_defdoc4>
                <!--pk_defdoc5,最大长度为20,类型为:String-->
                <pk_defdoc5></pk_defdoc5>
                <!--pk_defdoc6,最大长度为20,类型为:String-->
                <pk_defdoc6></pk_defdoc6>
                <!--pk_defdoc7,最大长度为20,类型为:String-->
                <pk_defdoc7></pk_defdoc7>
                <!--pk_defdoc8,最大长度为20,类型为:String-->
                <pk_defdoc8></pk_defdoc8>
                <!--pk_defdoc9,最大长度为20,类型为:String-->
                <pk_defdoc9></pk_defdoc9>
                <!--pk_defdoc10,最大长度为20,类型为:String-->
                <pk_defdoc10></pk_defdoc10>
                <!--pk_defdoc11,最大长度为20,类型为:String-->
                <pk_defdoc11></pk_defdoc11>
                <!--pk_defdoc12,最大长度为20,类型为:String-->
                <pk_defdoc12></pk_defdoc12>
                <!--pk_defdoc13,最大长度为20,类型为:String-->
                <pk_defdoc13></pk_defdoc13>
                <!--pk_defdoc14,最大长度为20,类型为:String-->
                <pk_defdoc14></pk_defdoc14>
                <!--pk_defdoc15,最大长度为20,类型为:String-->
                <pk_defdoc15></pk_defdoc15>
                <!--pk_defdoc16,最大长度为20,类型为:String-->
                <pk_defdoc16></pk_defdoc16>
                <!--pk_defdoc17,最大长度为20,类型为:String-->
                <pk_defdoc17></pk_defdoc17>
                <!--pk_defdoc18,最大长度为20,类型为:String-->
                <pk_defdoc18></pk_defdoc18>
                <!--pk_defdoc19,最大长度为20,类型为:String-->
                <pk_defdoc19></pk_defdoc19>
                <!--pk_defdoc20,最大长度为20,类型为:String-->
                <pk_defdoc20></pk_defdoc20>
                <!--ntotalreturnnumber,累计退货数量，最大长度为20,类型为:UFDouble-->
                <ntotalreturnnumber>0.00000000</ntotalreturnnumber>
                <!--ntotalcarrynumber,最大长度为20,类型为:UFDouble-->
                <ntotalcarrynumber>0.00000000</ntotalcarrynumber>
                <!--ntotalplanreceiptnumber,最大长度为20,类型为:UFDouble-->
                <ntotalplanreceiptnumber>0.00000000</ntotalplanreceiptnumber>
            </entry>
        </so_order_body>
    </so_order>
</ufinterface>

```